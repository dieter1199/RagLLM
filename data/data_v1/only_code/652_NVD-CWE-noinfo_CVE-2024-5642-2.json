print("Python requires an OpenSSL 1.0.2 or 1.1 compatible "
"libssl with X509_VERIFY_PARAM_set1_host().")
print("LibreSSL 2.6.4 and earlier do not provide the necessary "
"APIs, https://github.com/libressl-portable/portable/issues/381")
# OpenSSL 1.0.2 uses Kerberos for KRB5 ciphers
krb5_h = find_file(
'krb5.h', self.inc_dirs,
['/usr/kerberos/include']
if krb5_h:
ssl_incs.extend(krb5_h)
if config_vars.get("HAVE_X509_VERIFY_PARAM_SET1_HOST"):
self.add(
Extension(
'_ssl',
['_ssl.c'],
depends=[
'socketmodule.h',
'_ssl/debughelpers.c',
'_ssl_data.h',
'_ssl_data_111.h',
'_ssl_data_300.h',
],
**openssl_extension_kwargs
)
else:
self.missing.append('_ssl')
