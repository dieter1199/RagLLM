let snapshot_path = self.snapshots_path.join(snapshot_name);
let absolute_snapshot_path =
snapshot_path
.canonicalize()
.map_err(|_| CollectionError::NotFound {
what: format!("Snapshot {snapshot_name}"),
})?;
let absolute_snapshot_dir =
self.snapshots_path
.canonicalize()
.map_err(|_| CollectionError::NotFound {
what: format!("Snapshot directory: {}", self.snapshots_path.display()),
})?;
return Err(CollectionError::NotFound {
what: format!("Snapshot {snapshot_name}"),
});
if !snapshot_path.exists() {
return Err(CollectionError::NotFound {
what: format!("Snapshot {snapshot_name}"),
});
Ok(snapshot_path)
