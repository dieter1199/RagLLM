form.add_field("name", b"123", content_transfer_encoding="base64")
async def test_POST_DATA_with_content_transfer_encoding(aiohttp_client) -> None:
async def handler(request):
data = await request.post()
assert b"123" == data["name"]
return web.Response()
app = web.Application()
app.router.add_post("/", handler)
client = await aiohttp_client(app)
form = FormData()
form.add_field("name", b"123", content_transfer_encoding="base64")
resp = await client.post("/", data=form)
assert 200 == resp.status
await resp.release()
form.add_field("name", b"123", content_transfer_encoding="base64")
resp = await client.post("/", data={"file": data})
