import java.util.HashMap;
* @param id the unique identifier of this set of parameters, mostly used to isolate parameters value execution
* @param rawParameters raw parameters, their values can contain velocity directives
public WikiUIExtensionParameters(String id, String rawParameters, ComponentManager cm)
this.id = id;
this.parameters = parseParameters(rawParameters);
boolean isCacheValid = false;
isCacheValid = true;
}
if (!isCacheValid) {
this.evaluatedParameters = new HashMap<>();
if (this.parameters.size() > 0) {
VelocityEngine velocityEngine = this.velocityManager.getVelocityEngine();
VelocityContext velocityContext = this.velocityManager.getVelocityContext();
for (String propertyKey : this.parameters.stringPropertyNames()) {
if (!StringUtils.isBlank(propertyKey)) {
String propertyValue = this.parameters.getProperty(propertyKey);
this.evaluatedParameters.put(propertyKey, writer.toString());
}
}
} catch (XWikiVelocityException ex) {
this.previousContextId = currentContextId;
this.previousWiki = currentWiki;
return this.evaluatedParameters;
