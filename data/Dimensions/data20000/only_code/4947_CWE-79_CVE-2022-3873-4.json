Editor.shapesImage = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIGZpbGw9IiMwMDAwMDAiPjxnPjxwYXRoIGQ9Ik0wLDBoMjR2MjRIMFYweiIgZmlsbD0ibm9uZSIvPjwvZz48Zz48Zz48cGF0aCBkPSJNMywxMWg4VjNIM1YxMXogTTUsNWg0djRINVY1eiIvPjxwYXRoIGQ9Ik0xMywzdjhoOFYzSDEzeiBNMTksOWgtNFY1aDRWOXoiLz48cGF0aCBkPSJNMywyMWg4di04SDNWMjF6IE01LDE1aDR2NEg1VjE1eiIvPjxwb2x5Z29uIHBvaW50cz0iMTgsMTMgMTYsMTMgMTYsMTYgMTMsMTYgMTMsMTggMTYsMTggMTYsMjEgMTgsMjEgMTgsMTggMjEsMTggMjEsMTYgMTgsMTYiLz48L2c+PC9nPjwvc3ZnPg==';
if (this.dialogImg != null)
this.container.parentNode.removeChild(this.container);
mxUtils.write(td, mxResources.get('background') + ':');
var backgroundInput = document.createElement('input');
backgroundInput.setAttribute('type', 'text');
var backgroundButton = document.createElement('button');
backgroundButton.style.width = '22px';
backgroundButton.style.height = '22px';
backgroundButton.style.cursor = 'pointer';
backgroundButton.style.marginRight = '20px';
backgroundButton.style.backgroundPosition = 'center center';
backgroundButton.style.backgroundRepeat = 'no-repeat';
if (mxClient.IS_FF)
{
backgroundButton.style.position = 'relative';
backgroundButton.style.top = '-6px';
}
var newBackgroundColor = graph.background;
function updateBackgroundColor()
{
if (newBackgroundColor == null || newBackgroundColor == mxConstants.NONE)
{
backgroundButton.style.backgroundColor = '';
backgroundButton.style.backgroundImage = 'url(\'' + Dialog.prototype.noColorImage + '\')';
}
else
{
backgroundButton.style.backgroundColor = newBackgroundColor;
backgroundButton.style.backgroundImage = '';
}
};
updateBackgroundColor();
mxEvent.addListener(backgroundButton, 'click', function(evt)
{
editorUi.pickColor(newBackgroundColor || 'none', function(color)
{
newBackgroundColor = color;
updateBackgroundColor();
});
mxEvent.consume(evt);
});
td.appendChild(backgroundButton);
mxUtils.write(td, mxResources.get('gridSize') + ':');
mxUtils.write(td, mxResources.get('image') + ':');
var imgPreview = document.createElement('img');
imgPreview.setAttribute('valign', 'middle');
imgPreview.style.maxWidth = '100px';
imgPreview.style.height = '60px';
if (img != null && Graph.isPageLink(img.src))
img = editorUi.createImageForPageLink(img.src, null);
imgPreview.setAttribute('src', img.src);
imgPreview.style.display = '';
imgPreview.removeAttribute('src');
editorUi.showBackgroundImageDialog(function(image, failed)
updateBackgroundImage();
}, newBackgroundImage);
breaks[i].destroy();
