void* ipc_alloc(int size)
void* out;
int refcount;
*	Returns the pointer to the object.
*	NULL is returned if the allocation fails.
void* ipc_rcu_alloc(int size)
void* out;
/*
* workqueue if necessary (for vmalloc).
if (out) {
out += HDRLEN_VMALLOC;
container_of(out, struct ipc_rcu_hdr, data)->is_vmalloc = 1;
container_of(out, struct ipc_rcu_hdr, data)->refcount = 1;
}
if (out) {
out += HDRLEN_KMALLOC;
container_of(out, struct ipc_rcu_hdr, data)->is_vmalloc = 0;
container_of(out, struct ipc_rcu_hdr, data)->refcount = 1;
}
void ipc_rcu_getref(void *ptr)
container_of(ptr, struct ipc_rcu_hdr, data)->refcount++;
if (--container_of(ptr, struct ipc_rcu_hdr, data)->refcount > 0)
