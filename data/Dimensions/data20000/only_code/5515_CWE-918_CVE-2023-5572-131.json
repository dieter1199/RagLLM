import { PutObjectCommand } from "@aws-sdk/client-s3";
import { getSignedUrl } from "@aws-sdk/s3-request-presigner";
import { nanoid } from "nanoid";
import mime from "mime-types";
import { extractPreviewDataFromOpenGraph } from "#lib/utils";
import { isAuthenticated } from "#lib/middleware";
import { procedure, router } from "#lib/trpc";
import * as errors from "#lib/errors";
import { hostConfig, HostConfig } from "#plugins/host-config";
const authenticatedProcedure = procedure.use(isAuthenticated);