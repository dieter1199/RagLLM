echo '<div class="form-group"><label class="control-label col-md-2">'._markingPeriods.' :</label><div class="col-md-3">' . $print_mp . '</div></div>';
course_periods cp , courses c,course_period_var cpv,school_periods sp,rooms r WHERE cp.course_id=c.COURSE_ID AND cp.COURSE_PERIOD_ID=cpv.COURSE_PERIOD_ID  AND sp.PERIOD_ID=cpv.PERIOD_ID AND cpv.ROOM_ID=r.ROOM_ID AND (cp.MARKING_PERIOD_ID IN (' . GetMPChildren($sel_mp_info['MP_TYPE'],$_REQUEST['marking_period_id']) . ') OR (cp.MARKING_PERIOD_ID IS NULL AND (cp.BEGIN_DATE BETWEEN \'' . $sel_mp_info['START_DATE'] . '\' AND \'' . $sel_mp_info['END_DATE'] . '\'))) AND (cp.TEACHER_ID=\'' . UserStaffID() . '\' OR cp.SECONDARY_TEACHER_ID=\'' . UserStaffID() . '\') AND cp.SCHOOL_ID=\'' . UserSchool() . '\' AND cp.SYEAR=' . UserSyear()), array('PERIOD_ID' => 'GetPeriod', 'MARKING_PERIOD_ID' => 'GetMP_teacherschedule'));
$schedule_RET[$rdi]['DURATION'] = date("g:i A", strtotime($rdd['START_TIME'])).' to '. date("g:i A", strtotime($rdd['END_TIME']));
if ($schedule_RET[$rdi]['MARKING_PERIOD_ID'] == 'Custom') {
$schedule_RET[$rdi]['MARKING_PERIOD_ID'] = date('M/d/Y', strtotime($cp_info[1]['BEGIN_DATE'])) . ' to ' . date('M/d/Y', strtotime($cp_info[1]['END_DATE']));
}
}
if (count($schedule_RET) > 0) {
echo '<div class="panel">';
ListOutput($schedule_RET, array('COURSE' => _course,
'PERIOD' => _period,
'DAYS' => _days,
'DURATION' => _time,
'ROOM' => _room,
'MARKING_PERIOD_ID' => _markingPeriod,
), _course, _courses);
echo '</div>';
}else
echo '<br><div class="alert alert-danger no-border">'._thisStaffIsNotScheduledToAnyCoursePeriodAndThereforeNoScheduleDataIsAvailable.'.</div>';
}
else {
echo '<div class="alert alert-danger no-border"><i class="icon-alert"></i> '._thisStaffIsNotScheduledToAnyCoursePeriodAndThereforeNoScheduleDataIsAvailable.'.</div>';
function CreateSelect($val, $name, $opt, $link = '') {
function _makeDays($value, $column = '') {
?>
