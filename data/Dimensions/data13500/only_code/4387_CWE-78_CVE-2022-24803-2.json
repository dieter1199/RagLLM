if selector
IO.foreach(path).select.with_index(1, &selector)
else
URI.open(path, &:read)