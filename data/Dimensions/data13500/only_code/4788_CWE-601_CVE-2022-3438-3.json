def test_edit_fullname(self):
body={'action': 'edit', 'username': self.USERNAME, 'fullname': 'My fullname'},
# Then user is updated successfully
self.assertInBody("User information modified successfully.")
# Then database is updated
obj = UserObject.query.filter(UserObject.username == self.USERNAME).first()
self.assertEqual('My fullname', obj.fullname)
def test_add_edit_delete_user_with_encoding(self):
"""
Check creation of user with non-ascii char.
"""
self._add_user("Éric", "éric@test.com", "pr3j5Dwi", "/home/", UserObject.USER_ROLE)
self.assertInBody("User added successfully.")
self.assertInBody("Éric")
self.assertInBody("éric@test.com")
# Update user
self._edit_user("Éric", "eric.létourno@test.com", "écureuil", "/tmp/", UserObject.ADMIN_ROLE)
self.assertInBody("User information modified successfully.")
self.assertInBody("Éric")
self.assertInBody("eric.létourno@test.com")
self.assertNotInBody("/home/")
self.assertInBody("/tmp/")
self._delete_user("Éric")
self.assertInBody("User account removed.")
self.assertNotInBody("Éric")
