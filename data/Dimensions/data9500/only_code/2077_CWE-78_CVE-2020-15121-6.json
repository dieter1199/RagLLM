if (!(bytes = read (sh_out[0], buffer, sizeof (buffer)-1))) {
buffer[sizeof (buffer) - 1] = '\0';
if (len) {
*len += bytes;
outputptr = r_str_append (outputptr, buffer);
if (!read (sh_err[0], buffer, sizeof (buffer)-1)) {
buffer[sizeof (buffer) - 1] = '\0';
*sterr = r_str_append (*sterr, buffer);
ptr = p + 2;