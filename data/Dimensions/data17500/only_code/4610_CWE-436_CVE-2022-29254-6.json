use SilverStripe\Omnipay\Model\Message;
protected $requestMessageType = Message\RefundRequest::class;
protected $errorMessageType = Message\RefundError::class;
if ($serviceResponse->isAwaitingNotification()) {
} else {
if ($serviceResponse->isError()) {
$this->createMessage($this->errorMessageType, $response);
} else {
if ($isPartial) {
$this->createPartialPayment(PaymentMath::multiply($amount, '-1'), $this->pendingState);
}
$this->markCompleted($this->endState, $serviceResponse, $response);
$this->createMessage(Message\PartiallyRefundedResponse::class, $gatewayMessage);
$this->createMessage(Message\RefundedResponse::class, $gatewayMessage);