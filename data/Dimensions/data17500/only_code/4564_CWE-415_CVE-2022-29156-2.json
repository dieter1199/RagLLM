clt->dev.class = rtrs_clt_dev_class;
clt->dev.release = rtrs_clt_dev_release;
goto err;
err = device_register(&clt->dev);
if (err) {
put_device(&clt->dev);
goto err;
}
goto err_dev;
goto err_dev;
err_dev:
device_unregister(&clt->dev);
err:
kfree(clt);
mutex_destroy(&clt->paths_ev_mutex);
mutex_destroy(&clt->paths_mutex);
/* release callback will free clt in last put */