import java.io.BufferedInputStream;
import io.onedev.server.util.ContentDetector;
try (InputStream is = new BufferedInputStream(new FileInputStream(artifactFile))) {
response.setContentType(ContentDetector.detectMediaType(is, artifactPath).toString());
} catch (Exception e) {
throw new RuntimeException(e);
}
