/// Note: \p allocator does not need to be empty when passed in. We always
/// append.