"net/url"
var dbDSN string
dbDSN = fmt.Sprintf("%s:%s@tcp(%s:%d)/?charset=utf8mb4&tidb_snapshot=%s", cfg.User, cfg.Password, cfg.Host, cfg.Port, cfg.Snapshot)
} else {
dbDSN = fmt.Sprintf("%s:%s@tcp(%s:%d)/?charset=utf8mb4", cfg.User, cfg.Password, cfg.Host, cfg.Port)
dbDSN += fmt.Sprintf("&%s=%%27%s%%27", key, url.QueryEscape(val))
dbConn, err := sql.Open("mysql", dbDSN)
err = dbConn.Ping()
return dbConn, errors.Trace(err)
