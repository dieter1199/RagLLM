if (count(X2Model::model($this->associationType)->findAllByPk($this->associationId)) > 0) {
if (isset($action) && (strcasecmp($action->associationType, 'contacts') === 0 || in_array($action->type, array('call', 'note', 'time')))) {
// Special considerations for publisher-created actions, i.e. call, note, time, and anything associated with a contact
$authorText = empty($authorText) ? Yii::t('app', 'Someone') : $authorText;
} else {
'{modelLink}' => X2Model::getModelLink($this->associationId, $this->associationType, $requireAbsoluteUrl),
$criteria->addCondition ('user=:getAccessCriteria_username');
$criteria->addCondition (
'user IN (' .
'SELECT DISTINCT b.username ' .
'FROM x2_group_to_user a JOIN x2_group_to_user b ' .
'ON a.groupId=b.groupId ' .
'WHERE a.username=:getAccessCriteria_username' .
') OR (user = :getAccessCriteria_username)');
$criteria->addCondition ("(user=:getAccessCriteria_username OR visibility=1)");