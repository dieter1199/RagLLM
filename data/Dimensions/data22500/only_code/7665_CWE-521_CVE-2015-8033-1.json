extract(psa(array('new_pass', 'mail_password')));
$message = gTxt('password_changed');
if ($mail_password) {
$email = fetch('email', 'txp_users', 'name', $txp_user);
send_new_password($new_pass, $email, $txp_user);
$message .= sp.gTxt('and_mailed_to').sp.$email;
}
$message .= '.';
fInput('password', 'new_pass', '', '', '', '', INPUT_REGULAR, '', 'new_pass'),
checkbox('mail_password', '1', true, '', 'mail_password').
n.tag(gTxt('mail_it'), 'label', array('for' => 'mail_password')), array('class' => 'edit-admin-mail-password')).
$passwd = generate_password(PASSWORD_LENGTH);
if (change_user_password($name, $passwd)) {
$email = safe_field("email", 'txp_users', "name = '".doSlash($name)."'");
if (send_new_password($passwd, $email, $name)) {
$changed[] = $name;
$msg = 'author_updated';
} else {
return author_list(array(gTxt('could_not_mail').' '.txpspecialchars($name), E_ERROR));
}
}
