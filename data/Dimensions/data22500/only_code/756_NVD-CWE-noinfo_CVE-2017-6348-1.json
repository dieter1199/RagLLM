#ifdef CONFIG_LOCKDEP
static int hashbin_lock_depth = 0;
#endif
if ( hashbin->hb_type & HB_LOCK ) {
spin_lock_irqsave_nested(&hashbin->hb_spinlock, flags,
hashbin_lock_depth++);
}
queue = dequeue_first((irda_queue_t**) &hashbin->hb_queue[i]);
while (queue ) {
if (free_func)
(*free_func)(queue);
queue = dequeue_first(
(irda_queue_t**) &hashbin->hb_queue[i]);
if ( hashbin->hb_type & HB_LOCK) {
#ifdef CONFIG_LOCKDEP
hashbin_lock_depth--;
#endif
}