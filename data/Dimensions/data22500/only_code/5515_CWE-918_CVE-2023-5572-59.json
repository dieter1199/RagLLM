import { AuthenticatedContext } from "./middleware";
import { ObjectId, UnderscoreID } from "./mongo";
import { jsonToBuffer } from "./processing";
import {
OutputContentProcessor,
createOutputContentProcessor as createOutputContentProcessorGitHub
} from "#routes/git/github/process-content";
import { publishGitDataEvent } from "#routes/git/events";
const createGenericOutputContentProcessor = async (
ctx: AuthenticatedContext,
gitData: UnderscoreID<FullGitData<ObjectId>>
): Promise<OutputContentProcessor> => {
if (gitData.provider === "github") {
return await createOutputContentProcessorGitHub(ctx, gitData);
}
return {
process() {
return Promise.resolve("");
},
processBatch(input) {
return Promise.resolve(input.map(() => ""));
}
};
};
