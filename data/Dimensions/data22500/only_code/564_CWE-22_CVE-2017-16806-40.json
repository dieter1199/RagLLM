private readonly List<WebSocketListener> _listeners = new List<WebSocketListener>();
public WebSocketEventListener(List<IPEndPoint> endpoints)
public WebSocketEventListener(List<IPEndPoint> endpoints, WebSocketListenerOptions options)
foreach (var endpoint in endpoints)
{
var listener = new WebSocketListener(endpoint, options);
var rfc6455 = new WebSocketFactoryRfc6455(listener);
listener.Standards.RegisterStandard(rfc6455);
_listeners.Add(listener);
}
foreach (var listener in _listeners)
{
listener.Dispose();
}
public void Start()
foreach (var listener in _listeners)
{
listener.Start();
}
public void Stop()
foreach (var listener in _listeners)
{
listener.Stop();
}
foreach (var listener in _listeners)
{
Task.Run(() => HandleListners(listener));
}