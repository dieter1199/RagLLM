char *dir = "/etc";
if ((fd = xfmkstemp(&tmpname, dir)) == NULL) {