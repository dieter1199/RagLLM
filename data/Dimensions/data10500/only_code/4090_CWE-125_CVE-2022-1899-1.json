while (needle < to) {
if (needle + 4 < to) {
ut32 n1 = r_read_le32 (buf + needle - from);
rc = r_utf8_decode (buf + needle - from, to - needle, NULL);
char *w = (char *)buf + needle + rc - from;
rc = r_utf8_decode (buf + needle - from, to - needle, &r);