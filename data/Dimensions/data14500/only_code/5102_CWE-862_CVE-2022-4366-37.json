*
* Authors:	Liran Tal <liran@enginx.com>
include_once('library/config_read.php');
?>
<?php
include_once ("library/tabber/tab-layout.php");
?>
<?php
?>
<div id="contentnorightbar">
<h2 id="Intro"><a href="#"  onclick="javascript:toggleShowDiv('helpPage')">RAID Status
<h144>&#x2754;</h144></a></h2>
<div id="helpPage" style="display:none;visibility:visible" >
<br/>
</div>
<br/>
<div class="tabber">
if (!file_exists('/proc/mdstat')):
?>
<font color='red'><b>Error</b> accessing RAID device information:</font>
<br/><br/>
<?php
else:
exec("cat /proc/mdstat  | awk '/md/ {print $1}'", $mdstat);
<font color='red'><b>Error</b> accessing RAID device information:</font>
<br/><br/>
<?php
foreach($mdstat as $mddevice):
?>
<div class="tabbertab" title="<?php echo $mddevice ?>">
<?php
$output = "";
$cmd = "sudo /sbin/mdadm --detail /dev/$mddevice";
exec($cmd, $output);
?>
<table class='summarySection'>
<?php
foreach($output as $line):
?>
<?php
list($var, $val) = split(":", $line);
?>
<tr>
<td class='summaryKey'> <?php echo $var ?> </td>
<td class='summaryValue'><span class='sleft'> <?php echo $val ?> </span> </td>
</tr>
<?php endforeach; ?>
</table>
</div>
<?php endforeach; ?>
<?php endif; ?>
</div>
</div>
<div id="footer">
include 'page-footer.php';
</div>
</div>
