server := middleware(config)
router.Use(func(h http.Handler) http.Handler {
server.next = h
return server
func middleware(config Config) *server {
next                     http.Handler
const defaultLoginEndpoint = "/api/auth/login"
const defaultRefreshEndpoint = "/api/auth/refresh"
const defaultLogoutEndpoint = "/api/auth/logout"
const defaultRegisterEndpoint = "/api/auth/register"
