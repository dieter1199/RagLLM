{
if(substr($fulllink, -1) == '/') $fulllink = substr($fulllink, 0, -1);
return $fulllink;
if (isset($params['section']) && $params['section'] == SITE_DEFAULT_SECTION) {
if (isset($params['section']) && !isset($params['action'])) {
}
} else {
$link = '';
//trim last / off
}
// if this url wasn't a valid section, or action then kill it.  It might not actually be a "bad" url,
if (!$ret) $this->url_type = 'malformed';
// if we hit this it's an old school url coming in and we're trying to use SEF's.
header("Location: ".$this->makeLink(array('section'=>intval($_REQUEST['section']))),TRUE,301);
if ($this->url_type != 'malformed') {
// if page or controller is not found we will route to the not found controller.
$this->url_parts = explode('/', $this->sefPath);
define('PRINTER_FRIENDLY', (isset($_REQUEST['printerfriendly']) || isset($this->params['printerfriendly'])) ? 1 : 0);
public function routePageRequest() {
$_REQUEST['section'] = SITE_DEFAULT_SECTION;
// check the regular page names.  If that still doesn't work then we'll redirect them to the
'url_parts'=>array(
'url_parts'=>array(
//if section is empty, we'll look for the page overrides first and route to
$c = new storeCategory();
//fake parts and route to action
$this->url_type = 'action';
$this->url_parts[1] = 'show'; //controller
$this->url_parts[2] = 'title'; //controller
$this->url_parts[3] = $sef_url; //controller
//fake parts and route to action
$this->url_type = 'action';
$this->url_parts[1] = 'showall'; //controller
$this->url_parts[2] = 'title'; //controller
$this->url_parts[3] = $sef_url; //controller
if ($part_count == count($map['url_parts'])) {
}
}
}
// most of the time we can just grab the action outta the POST array since this is passed as a hidden field,
return $url;
$this->sefPath = substr($this->sefPath,strlen(substr(PATH_RELATIVE,0,-1)));
$this->ectid = $s[1];
}
}
$section = $this->url_style=="sef" ? $this->getPageByName($_REQUEST['section'])->id : intval($_REQUEST['section']) ;
{
