//    public $cacheDir = "framework/modules/pixidou/images/";
'editor',
'exitEditor'
$canSaveOg = $user->id==$file->poster || $user->is_admin ? 1 : 0 ;
if (file_exists(BASE.$file->directory.$file->filename)) {
$file->copyToDirectory(BASE.$this->cacheDir);
flash('error',gt('The file').' "'.BASE.$file->directory.$file->filename.'" '.gt('does not exist on the server.'));
redirect_to(array("controller"=>'file',"action"=>'picker',"ajax_action"=>1,"update"=>$this->params['update'],"filter"=>$this->params['filter']));
$oldimage = new expFile($this->params['fid']);
$copyname = expFile::resolveDuplicateFilename($oldimage->path);
copy(BASE.$this->cacheDir."/".$this->params['cpi'],$oldimage->directory.$copyname); //copy the edited file over to the files dir
$newFile->filesize = filesize(BASE.$this->cacheDir."/".$this->params['cpi']);
$resized = getimagesize(BASE.$this->cacheDir."/".$this->params['cpi']);
$resized = getimagesize(BASE.$this->cacheDir."/".$this->params['cpi']);
copy(BASE.$this->cacheDir."/".$this->params['cpi'],$oldimage->directory.$oldimage->filename); //copy the edited file over to the files dir
$types = array(".jpg",".gif",".png");
$cachedir = BASE.$this->cacheDir;
if (in_array(substr($tmpfile,-4,4),$types)) {
$filename = $cachedir.$tmpfile;
redirect_to(array("controller"=>'file',"action"=>'picker',"ajax_action"=>1,"update"=>$this->params['update'],"filter"=>$this->params['filter']));
?>
