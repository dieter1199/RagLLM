{
int d = __open ("/dev/tty", 0);
if (d < 0)
return errno;
result = __ttyname_r (d, real_tty_path, sizeof (tty_pathname));
(void) __close (d);
if (result != 0)
{
__set_errno (result);
return result;
}
}
size_t needed = strlen (ut->ut_line) + 1;
if (needed < name_len)
memcpy (name, ut->ut_line, needed);
