* @param $fileName
* @return \Illuminate\Http\UploadedFile
protected function getTestFile($fileName)
return new \Illuminate\Http\UploadedFile(base_path('tests/test-data/test-file.txt'), $fileName, 'text/plain', 55, null, true);
* @param $name
* @param int $uploadedTo
* @return \Illuminate\Foundation\Testing\TestResponse
protected function uploadFile($name, $uploadedTo = 0)
$fileService = $this->app->make(\BookStack\Uploads\AttachmentService::class);
$this->call('POST', 'attachments/link', [
'attachment_link_url' => 'https://example.com',
'attachment_link_name' => 'Example Attachment Link',
'attachment_link_uploaded_to' => $page->id,
]);
$attachmentId = Attachment::first()->id;
$update = $this->call('PUT', 'attachments/' . $attachmentId, [
'id' => $attachmentId,
