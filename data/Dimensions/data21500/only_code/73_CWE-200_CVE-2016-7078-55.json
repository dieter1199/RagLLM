expected_proxy_ids = SmartProxy.with_features("TFTP").map { |p| p.id }
expected_proxy_ids = SmartProxy.with_features("TFTP").map { |p| p.id }
assert_difference('SmartProxy.count') do
assert_difference('SmartProxy.count', -1) do
assert_difference('Environment.count', 2) do
assert_difference('Puppetclass.count', 1) do
assert_difference('Puppetclass.count', 0) do
assert_difference('Environment.count', -1) do
assert_difference('Environment.find_by_name("env1").puppetclasses.count', -2) do
assert_difference('LookupKey.count', 1) do
assert_difference('Environment.count', 0) do
assert_difference('Environment.count', 1) do
assert_difference('Environment.count', 0) do
assert_difference('LookupKey.count', 0) do
post :import_puppetclasses, {:id => smart_proxies(:puppetmaster).id, :except => 'new,updated'}, set_session_user
assert_difference('Puppetclass.count', 1) do
assert_difference('Puppetclass.count', 2) do