import corsPlugin from "@fastify/cors";
methods: ["GET", "DELETE", "PUT", "POST"],
origin(origin, callback) {
if (!origin || origin === "null") {
callback(null, true);
return;
}
const { hostname } = new URL(origin);
const appHostname = new URL(fastify.config.PUBLIC_APP_URL).hostname;
if (
hostname === "localhost" ||
hostname.endsWith(appHostname) ||
(fastify.config.VRITE_CLOUD && hostname.endsWith("swagger.io"))
) {
callback(null, true);
return;
}
callback(new Error("Not allowed"), false);
}
