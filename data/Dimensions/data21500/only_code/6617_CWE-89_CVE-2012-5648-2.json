users = User.all(:conditions => "#{key_name} #{operator} '#{value_to_sql(operator, value)}'")
opts  = hosts.empty? ? "= 'nil'" : "IN (#{hosts.map(&:id).join(',')})"
conditions  = "puppetclasses.name #{operator} '#{value_to_sql(operator, value)}'"
opts     = {:conditions => "name = '#{key_name}' and value #{operator} '#{value_to_sql(operator, value)}'", :order => :priority}
negate_opts = {:conditions => "name = '#{key_name}' and NOT(value #{operator} '#{value_to_sql(operator, value)}') and priority > #{max}", :order => :priority}