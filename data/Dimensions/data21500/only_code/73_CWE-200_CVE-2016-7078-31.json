assert_difference 'Host.count' do
assert_difference 'Host.count' do
assert_difference('Host.count', -1) do
hosts.map! {|h| Host.find(h.id)}
hosts.each { |host| assert_equal hostgroup, host.hostgroup }
host = Host.find_by_name name
assert_not_nil host
assert_equal host.hostgroup, hostgroup
assert_equal environments(:global_puppetmaster), Host.find(@host1.id).environment
assert_equal environments(:global_puppetmaster), Host.find(@host2.id).environment
assert Host.find(@host1.id).environment == hostgroup.environment
assert Host.find(@host2.id).environment == hostgroup.environment
assert_equal users(:one).id_and_type, Host.find(@host1.id).is_owned_by
assert_equal users(:one).id_and_type, Host.find(@host2.id).is_owned_by
assert_equal proxy, host.reload.puppet_ca_proxy
host = Host.first
assert_difference "location.hosts.count", (Host.count - cnt_hosts_location) do
assert_difference "organization.hosts.count", (Host.count - cnt_hosts_organization) do