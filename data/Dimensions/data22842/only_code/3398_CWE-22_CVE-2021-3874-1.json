// Override default location if set to local public to ensure not visible.
if ($storageType === 'local') {
$storageType = 'local_secure';
return $this->fileSystem->disk($storageType);
return $this->getStorage()->get($attachment->path);
*
* @param UploadedFile $uploadedFile
* @param int          $page_id
*
*
* @return Attachment
public function saveNewUpload(UploadedFile $uploadedFile, $page_id)
$largestExistingOrder = Attachment::where('uploaded_to', '=', $page_id)->max('order');
$attachment = Attachment::forceCreate([
* Store a upload, saving to a file and deleting any existing uploads
* @param UploadedFile $uploadedFile
* @param Attachment   $attachment
*
*
* @return Attachment
public function saveUpdatedUpload(UploadedFile $uploadedFile, Attachment $attachment)
*
* @param Attachment $attachment
*
*
* @param Attachment $attachment
$dirPath = dirname($attachment->path);
$storage->delete($attachment->path);
*
* @param UploadedFile $uploadedFile
*
*
* @return string
protected function putFileInStorage(UploadedFile $uploadedFile)
while ($storage->exists($basePath . $uploadFileName)) {
$storage->put($attachmentPath, $attachmentData);