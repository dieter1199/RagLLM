const char need_to_append_dot = base_name[base_len - 1] == '.' ? 0 : 1;