imbuf = (unsigned char *) AcquireQuantumMemory(imsx * imsy,1);
(void) ResetMagickMemory(imbuf, background_color_index, imsx * imsy);
dmbuf = (unsigned char *) AcquireQuantumMemory(dmsx * dmsy,1);
(void) ResetMagickMemory(dmbuf, background_color_index, dmsx * dmsy);
dmbuf = (unsigned char *) AcquireQuantumMemory(dmsx * dmsy,1);
(void) ResetMagickMemory(dmbuf, background_color_index, dmsx * dmsy);
(void) ResetMagickMemory(imbuf + imsx * y + posision_x, color_index, repeat_count);
if ((dmbuf = (unsigned char *) AcquireQuantumMemory(dmsx * dmsy,1)) == NULL) {