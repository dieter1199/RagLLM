session.simple_query(operation)
cursor = Cursor.new(session.with(retain_socket: true), operation)
update = Protocol::Update.new(
operation.database,
operation.collection,
operation.selector,
change,
flags: flags
)
session.execute update
delete = Protocol::Delete.new(
operation.database,
operation.collection,
operation.selector,
flags: [:remove_first]
)
session.execute delete
delete = Protocol::Delete.new(
operation.database,
operation.collection,
operation.selector
)
session.execute delete
