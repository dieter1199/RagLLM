atomic_set(&new->count, 0);
if (!atomic_add_unless(&ucounts->count, 1, INT_MAX))
if (atomic_dec_and_test(&ucounts->count)) {
spin_lock_irqsave(&ucounts_lock, flags);
spin_unlock_irqrestore(&ucounts_lock, flags);
kfree(ucounts);
}