echo "This was sent to chat log $@"
echo "This was the message $MESSAGESTRING"
echo "This was sender $SENDERNAME"
echo "This was receiver $RECEIVERNAME"
echo "This was receivertype $RECEIVERTYPE"
echo "List of chat commands $CHATCOMMANDS[@]"
CHATCOMMANDARRAY=0
COMMANDFOUND=false
while [ -n "${CHATCOMMANDS[$CHATCOMMANDARRAY]+set}" ]
do
CURRENTCHATCOMMAND=${CHATCOMMANDS[$CHATCOMMANDARRAY]}
#		echo "This is the current Chat Command $CURRENTCHATCOMMAND"
CUTCHATCOMMAND=${CURRENTCHATCOMMAND#*_}
#		echo "This remove chatcommand to get only the command name $CUTCHATCOMMAND"
if [ "$CUTCHATCOMMAND" = "$USERCOMMAND" ]
echo "Chat Command found"
COMMANDFOUND=true
if check_player_rank_allowed $USERCOMMAND $SENDERNAME
then
eval $CURRENTCHATCOMMAND "$SENDERNAME" $USERPARAMETERS
else
echo "Command not authorized"
lib_screensend $CONFIGDTSD_MAINSCREEN /pm $SENDERNAME "You do not have permission to use that command!"
fi
let CHATCOMMANDARRAY++
let CHATCOMMANDARRAY++
fi
done
if [ $COMMANDFOUND = false ]
then
lib_screensend $CONFIGDTSD_MAINSCREEN /pm $SENDERNAME "Unknown command. Please use !HELP for a list of the commands you can use"
fi