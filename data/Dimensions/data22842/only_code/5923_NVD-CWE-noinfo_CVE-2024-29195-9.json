result = (char*)malloc(((unsigned long long)neededSize + 1) * sizeof(char));
if (result == NULL)
result = (wchar_t*)malloc(((unsigned long long)neededSize + 1)*sizeof(wchar_t));
if (result == NULL)
result = (wchar_t*)malloc(sizeof(wchar_t)*(nwc+1));
if (result == NULL)
result = (char*)malloc(sizeof(char)*(nc + 1));
if (result == NULL)