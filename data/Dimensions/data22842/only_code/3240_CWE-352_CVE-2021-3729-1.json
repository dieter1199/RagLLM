protected UserRepositoryInterface $userRepository;
app('view')->share('title', (string) trans('firefly.currencies'));
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$subTitle     = (string) trans('firefly.create_currency');
public function defaultCurrency(Request $request, TransactionCurrency $currency)
app('preferences')->set('currencyPreference', $currency->code);
app('preferences')->mark();
Log::channel('audit')->info(sprintf('Make %s the default currency.', $currency->code));
$this->repository->enable($currency);
$request->session()->flash('success', (string) trans('firefly.new_default_currency', ['name' => $currency->name]));
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$message  = (string) trans(sprintf('firefly.cannot_disable_currency_%s', $location), ['name' => e($currency->name)]);
$subTitle = (string) trans('form.delete_currency', ['name' => $currency->name]);
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$request->session()->flash('error', (string) trans('firefly.cannot_delete_currency', ['name' => e($currency->name)]));
$request->session()->flash('error', (string) trans('firefly.cannot_delete_fallback_currency', ['name' => e($currency->name)]));
$request->session()->flash('success', (string) trans('firefly.deleted_currency', ['name' => $currency->name]));
* @throws FireflyException
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$message  = (string) trans(sprintf('firefly.cannot_disable_currency_%s', $location), ['name' => e($currency->name)]);
session()->flash('warning', (string) trans('firefly.disable_EUR_side_effects'));
session()->flash('success', (string) trans('firefly.currency_is_now_disabled', ['name' => $currency->name]));
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$subTitle         = (string) trans('breadcrumbs.edit_currency', ['name' => $currency->name]);
'enabled' => $hasOldInput ? (bool) $request->old('enabled') : $currency->enabled,
session()->flash('success', (string) trans('firefly.currency_is_now_enabled', ['name' => $currency->name]));
$page       = 0 === (int) $request->get('page') ? 1 : (int) $request->get('page');
$pageSize   = (int) app('preferences')->get('listPageSize', 50)->data;
$request->session()->flash('info', (string) trans('firefly.ask_site_owner', ['owner' => config('firefly.site_owner')]));
$request->session()->flash('error', (string) trans('firefly.could_not_store_currency'));
$request->session()->flash('success', (string) trans('firefly.created_currency', ['name' => $currency->name]));
if (1 === (int) $request->get('create_another')) {
$request->session()->flash('error', (string) trans('firefly.ask_site_owner', ['owner' => e(config('firefly.site_owner'))]));
$request->session()->flash('success', (string) trans('firefly.updated_currency', ['name' => $currency->name]));
if (1 === (int) $request->get('return_to_edit')) {
