File.stubs(:exists?).with('ssh/pkd/rspec_pub.pem').returns(false)
File.expects(:open).with('ssh/pkd/rspec_pub.pem', 'w').yields(file)
File.stubs(:exists?).with('ssh/pkd/rspec_pub.pem').returns(true)
File.stubs(:read).with('ssh/pkd/rspec_pub.pem').returns('ssh-rsa dcba')
File.stubs(:exists?).with('ssh/pkd/rspec_pub.pem').returns(true)
File.stubs(:read).with('ssh/pkd/rspec_pub.pem').returns('ssh-rsa dcba')
File.expects(:open).with('ssh/pkd/rspec_pub.pem', 'w').yields(file)