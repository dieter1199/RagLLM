assert_not_equal last_login, User.find(user.id).last_login_on
reloaded_user = User.find(user.id)
record = User.new :login => "dummy", :mail => "j@j.com", :auth_source_id => AuthSourceInternal.first.id
record               = User.new :login    => "dummy", :mail => "j@j.com", :auth_source_id => AuthSourceInternal.first.id,
:role_ids => [create_role.id.to_s]
record               = User.new :login    => "dummy", :mail => "j@j.com", :auth_source_id => AuthSourceInternal.first.id,
:role_ids => [extra_role.id].map(&:to_s)
user = FactoryGirl.create(:user)
user.organizations << org1
as_user user do
new_user = FactoryGirl.build(:user)
refute new_user.save
users(:one).default_location = Location.first
users(:one).default_organization = Organization.first
assert User.current.locations << Location.current
assert User.current.organizations << Organization.current