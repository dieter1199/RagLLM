let a = document.createElement('a');
// IE8 (and 9?) Fix
// ie8 doesn't parse the URL correctly until the anchor is actually
// added to the body, and an innerHTML is needed to trigger the parsing
const addToBody = (a.host === '' && a.protocol !== 'file:');
let div;
if (addToBody) {
div = document.createElement('div');
div.innerHTML = `<a href="${url}"></a>`;
a = div.firstChild;
// prevent the div from affecting layout
div.setAttribute('style', 'display:none; position:absolute;');
document.body.appendChild(div);
}
// This is also needed for IE8 because the anchor loses its
// IE9 adds the port to the host property unlike everyone else. If
if (addToBody) {
document.body.removeChild(div);
