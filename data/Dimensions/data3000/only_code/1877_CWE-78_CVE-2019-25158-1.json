var port = this.address().port;
console.log('Listening at port', port);
exec = childProcess.exec,
cmd = getCmdWithArgs(body),
cbk = onSpeechDone.bind(this, {
});
if (!cmd) {
cbk('Empty command generated');
exec(cmd, cbk);
return '';
speed = fields.speed,
cmd = 'google_speech' + ' -l ' + language + ' \"' + text + '\"' + ' -e overdrive 10 speed ' + speed;
return cmd;
speedParam = speed ? ' -s' : '',
cmd = 'gtts-cli' + ' -l ' + language + speedParam + ' --nocheck \"' + text + '\"' + ' | play -t mp3 -';
return cmd;
language = fields.language,
cmd = 'echo "' + text + '" | festival' + ' --tts --heap 1000000 --language ' + language;
return cmd;
pitch = '70',
cmd = 'espeak' + ' -v' + language + voiceCode + ' -s ' + speed + ' -p ' + pitch + ' \"' + text + '\"';
return cmd;
function onSpeechDone(args, err, stdout, stderr) {
var res = args.res,
fields = args.fields;
return;
'content-type': 'text/plain'
res.write('error:\n\n');
res.write(util.inspect(err) + '\n\n');
res.write('received data:\n\n');
res.end(util.inspect(fields));
