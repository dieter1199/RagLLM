$id = (int) $request['id'];
$user = get_userdata( $id );
if ( empty( $id ) || empty( $user->ID ) ) {
return new WP_Error( 'rest_user_invalid_id', __( 'Invalid user ID.' ), array( 'status' => 404 ) );
}
if ( get_current_user_id() === $id ) {
} elseif ( ! count_user_posts( $id, $types ) && ! current_user_can( 'edit_user', $id ) && ! current_user_can( 'list_users' ) ) {
$id   = (int) $request['id'];
$user = get_userdata( $id );
if ( empty( $id ) || empty( $user->ID ) ) {
return new WP_Error( 'rest_user_invalid_id', __( 'Invalid user ID.' ), array( 'status' => 404 ) );
$id = (int) $request['id'];
if ( ! current_user_can( 'edit_user', $id ) ) {
$id   = (int) $request['id'];
$user = get_userdata( $id );
$id = (int) $request['id'];
if ( ! current_user_can( 'delete_user', $id ) ) {
$id       = (int) $request['id'];
$user = get_userdata( $id );
if ( ! $user ) {
return new WP_Error( 'rest_user_invalid_id', __( 'Invalid user ID.' ), array( 'status' => 404 ) );
}
