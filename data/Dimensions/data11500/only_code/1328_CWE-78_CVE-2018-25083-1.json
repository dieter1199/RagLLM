const GitHubApi = require('github');
const Menu = require('terminal-menu');
const {
execSync
} = require('child_process');
const parse = require('parse-github-repo-url');
const url = execSync(`git config --get remote.origin.url`, {
encoding: 'utf8'
execSync(
`git fetch origin pull/${id}/head:${branch} && git checkout ${branch}`
);
console.log('Error: Could not find the specified pull request.');
this.fetchRequests().then(results => {
const menu = Menu({
width: process.stdout.columns - 4,
x: 0,
y: 2
});
menu.reset();
menu.write('Currently open pull requests:\n');
menu.write('-------------------------\n');
results.data.forEach(element => {
menu.add(`${element.number} - ${element.title} - ${element.head.user.login}`);
});
menu.add(`Exit`);
menu.on('select', label => {
menu.close();
this.fetch(label.split(' ')[0]);
});
process.stdin.pipe(menu.createStream()).pipe(process.stdout);
process.stdin.setRawMode(true);
menu.on('close', () => {
process.stdin.setRawMode(false);
process.stdin.end();
}).catch(err => {
console.log('Error: could not display pull requests. Please make sure this is a valid repository.')
});