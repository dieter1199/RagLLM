// [ ['-'|'+']? INTEGER? {N} [ S* ['-'|'+'] S* INTEGER ]?
const RE_NTH_ELEMENT = /^([+-]?\d*n)?\s*(?:([+-]?)\s*(\d+))?$/;
const parsed = formula.match(RE_NTH_ELEMENT);
if (!parsed) {
let a;
if (parsed[1]) {
a = parseInt(parsed[1], 10);
if (isNaN(a)) {
a = parsed[1].startsWith("-") ? -1 : 1;
} else a = 0;
const b =
(parsed[2] === "-" ? -1 : 1) *
(parsed[3] ? parseInt(parsed[3], 10) : 0);
return [a, b];