kms   kmsiface.KMSAPI
cmkID *string
// NewKMSKeyGeneratorWithMatDesc builds a new KMS key provider using the customer key ID and material
//	handler := s3crypto.NewKMSKeyGeneratorWithMatDesc(kms.New(sess), cmkID, matdesc)
func NewKMSKeyGeneratorWithMatDesc(kmsClient kmsiface.KMSAPI, cmkID string, matdesc MaterialDescription) CipherDataGenerator {
matdesc["kms_cmk_id"] = &cmkID
kp := &kmsKeyHandler{
kms:   kmsClient,
cmkID: &cmkID,
// These values are read only making them thread safe
kp.CipherData.WrapAlgorithm = KMSWrap
if !ok {
EncryptionContext: kp.CipherData.MaterialDescription,
iv := generateBytes(ivSize)
WrapAlgorithm:       KMSWrap,
MaterialDescription: kp.CipherData.MaterialDescription,