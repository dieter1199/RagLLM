import com.google.common.collect.*;
import java.util.*;
final String varsIndex = buildIndex(varList);
root.put("varsIndex", varsIndex);
private String buildIndex(final List<Variable> varList) {
final SetMultimap<String, Integer> uniGram = buildNGramIndex(varList, 1);
final SetMultimap<String, Integer> biGram = buildNGramIndex(varList, 2);
final SetMultimap<String, Integer> triGram = buildNGramIndex(varList, 3);
json.append("\"uniGram\":").append('\n');
appendTo(json, uniGram).append(',').append('\n');
appendTo(json, biGram).append(',').append('\n');;
appendTo(json, triGram);
private SetMultimap<String, Integer> buildNGramIndex(final List<Variable> varList, final int n) {
final TreeMultimap<String, Integer> uniGram = TreeMultimap.create();
for (int index = 0; index < varList.size(); index++) {
final Variable var = varList.get(index);
final String[] indexableNames = var.getIndexableNames();
for (final String indexableName : indexableNames) {
for (int i = 0; i < indexableName.length() - n + 1; i++) {
final String key = indexableName.substring(i, i + n);
uniGram.put(key, index);
}
}
return uniGram;