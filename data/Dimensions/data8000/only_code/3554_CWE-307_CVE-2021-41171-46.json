use Elabftw\Exceptions\ResourceNotFoundException;
* Create a new user. If no password is provided, it's because we create it from SAML.
public function create(string $email, array $teams, string $firstname = '', string $lastname = '', string $password = '', ?int $group = null, bool $forceValidation = false, bool $normalizeTeams = true, bool $alertAdmin = true): int
{
if ($normalizeTeams) {
$teams = $Teams->getTeamsFromIdOrNameOrOrgidArray($teams);
}
/**
* Select by email
*/
public function populateFromEmail(string $email): void
{
$sql = 'SELECT userid
FROM users
WHERE email = :email AND archived = 0 AND validated = 1 LIMIT 1';
$req = $this->Db->prepare($sql);
$req->bindParam(':email', $email);
$this->Db->execute($req);
$res = $req->fetchColumn();
if ($res === false) {
throw new ResourceNotFoundException(_('Email not found in database!'));
}
$this->populate((int) $res);
}
