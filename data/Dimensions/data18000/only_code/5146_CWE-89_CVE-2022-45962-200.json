$q_total[$k[1]] = $q_total[$k[1]] + $val;
$f_total = $f_total + $val;
if (in_array($k[1], $marking_sem_id))
$marking_sem_val[$k[1]] = $marking_sem_val[$k[1]] + $val;
else {
if (substr($k[1], 0, 1) != 'E') {
$pr_qr = DBGet(DBQuery("select parent_id from marking_periods where marking_period_id='$k[1]'"));
$parent_mp_id = $pr_qr[1]['PARENT_ID'];
$marking_sem_val[$parent_mp_id] = $marking_sem_val[$parent_mp_id] + $val;
}
if (substr($k[1], 0, 1) == 'E' && in_array(substr($k[1], 1), $marking_sem_id)) {
$marking_sem_val[substr($k[1], 1)] = $marking_sem_val[substr($k[1], 1)] + $val;
}
if (substr($k[1], 0, 1) == 'E' && !in_array(substr($k[1], 1), $marking_sem_id)) {
$pr_qr = DBGet(DBQuery("select parent_id from marking_periods where marking_period_id='" . substr($k[1], 1) . "'"));
$parent_mp_id = $pr_qr[1]['PARENT_ID'];
$marking_sem_val[$parent_mp_id] = $marking_sem_val[$parent_mp_id] + $val;
echo '<legend><b>'._scoreBreakoffPoints.'</b></legend>';
echo '<TABLE cellspacing=1><TR><TD>';
$table = '<TABLE>';
$table .= '<TR><TD rowspan=2 align=right width=100>' . $cp_grades[1]['COURSE_TITLE'] . ' - ' . substr($cp_grades[1]['CP_TITLE'], 0, strrpos(str_replace(' - ', ' ^ ', $cp_grades[1]['CP_TITLE']), '^')) . '</TD>';
$table .= '<TD><B>' . $grade['TITLE'] . '</B></TD>';
$table .= '<TD><INPUT type=text name=values[' . $course_period_id . '-' . $grade['ID'] . '] value="' . $programconfig[$course_period_id . '-' . $grade['ID']] . '" size=3 maxlength=5></TD>';
echo DrawRoundedRect($table);
echo '</fieldset></TD>';
