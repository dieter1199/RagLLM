public  $url_style = '';
public  $sefPath = null;
// strip out possible xss exploits via url
$_GET['id'] = intval($_GET['id']);
$_POST['id'] = intval($_POST['id']);
$_REQUEST['id'] = intval($_REQUEST['id']);
$_GET[$key] = intval($_GET[$key]);
$_POST[$key] = intval($_POST[$key]);
$_REQUEST[$key] = intval($_REQUEST[$key]);
// start splitting the URL into it's different parts
$this->splitURL();
// edebug($this,1);
$_POST['controller'] = $module;
$_REQUEST['controller'] = $module;
if ($this->url_parts[count($this->url_parts)-1] == '') array_pop($this->url_parts);
if (empty($this->url_parts[0])) array_shift($this->url_parts);
} elseif (count($this->url_parts) == 1 || $db->selectObject('section', "sef_name='" . substr($this->sefPath,1) . "'") != null) {
if (($db->selectObject('section', "sef_name='" . $this->url_parts[0] . "'") != null) && (in_array(array('printerfriendly','exportaspdf','ajax_action'), $this->url_parts))) {
$this->url_style = 'sef';
//fixme and we may also want to log any redirects taken??
$this->params = $this->convertPartsToParams();
$return_params['url_parts']['id'] = $this->url_parts[2];
// Set the module or controller - this how the actual routing happens
$_REQUEST[$requestType] = $return_params['controller']; //url_parts[0];
$_GET[$requestType] = $return_params['controller'];
$_POST[$requestType] = $return_params['controller'];
$_REQUEST['action'] = $action;
$_GET['action'] = $action;
$_POST['action'] = $action;
// pass off the name<=>value pairs
$save_value = expString::sanitize($value);
$_REQUEST[$key] = $save_value;
$_GET[$key] = $save_value;
$url .= substr(PATH_RELATIVE,0,-1).$this->sefPath;
if (isset($_REQUEST['PHPSESSID'])) unset($_REQUEST['PHPSESSID']);
if (substr($this->sefPath,-1) == "/") $this->sefPath = substr($this->sefPath,0,-1);
