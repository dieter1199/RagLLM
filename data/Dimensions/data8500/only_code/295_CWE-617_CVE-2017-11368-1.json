if (errcode != 0)
assert (state->status != 0);