def set_password(self, password, old_password=None):
assert old_password is None or isinstance(old_password, str)
if old_password and not check_password(old_password, self.hash_password):
raise ValueError(_("Wrong password"))
