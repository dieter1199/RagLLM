self.home = tempfile.mkdtemp()
for cleanup_method in [lambda: os.unlink(self.db_path), lambda: shutil.rmtree(self.home)]:
cleanup_method
with mock.patch('os.environ', env or {'HOME': self.home}):
'HOME': self.home,
'USERPROFILE': self.home,
assert os.path.join(self.home, '.b2_account_info') == actual_path
'HOME': self.home,
'USERPROFILE': self.home,
expected_path = os.path.abspath(os.path.join(self.home, '.b2_account_info'))
default_db_file_location = os.path.join(self.home, '.b2_account_info')
'HOME': self.home,
'USERPROFILE': self.home,
'HOME': self.home,
'USERPROFILE': self.home,