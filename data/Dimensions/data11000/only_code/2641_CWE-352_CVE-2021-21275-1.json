return self::onPost( $par, $out, $request );
static public function onPost( $par, $out, $request ) {
global $wgUser;
} else {
$dbw = wfGetDB( DB_MASTER );
$dbw->startAtomic(__METHOD__);
$dbw->insert( 'report_reports', [
'report_revid' => (int)$par,
'report_reason' => $request->getText('reason'),
'report_user' => $wgUser->getId(),
'report_user_text' => $wgUser->getName(),
'report_timestamp' => wfTimestampNow()
], __METHOD__ );
$dbw->endAtomic(__METHOD__);
$out->addWikiMsg( 'report-success' );
$out->addWikiMsg( 'returnto', '[[' . SpecialPage::getTitleFor('Diff', $par)->getPrefixedText() . ']]' );