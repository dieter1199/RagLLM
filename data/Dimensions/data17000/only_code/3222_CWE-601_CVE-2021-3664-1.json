function extractProtocol(address) {
var match = protocolre.exec(address)
, protocol = match[1] ? match[1].toLowerCase() : ''
, slashes = !!(match[2] && match[2].length >= 2)
, rest =  match[2] && match[2].length === 1 ? '/' + match[3] : match[3];
extracted = extractProtocol(address || '');
if (!extracted.slashes || url.protocol === 'file:') {