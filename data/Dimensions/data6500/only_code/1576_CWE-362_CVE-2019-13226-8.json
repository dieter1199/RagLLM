RollingFileAppender *rollingFileAppender = new RollingFileAppender("/tmp/.deepin-clone.log");
logger->registerAppender(consoleAppender);
const QDir user_home(getpwuid(pkexec_uid)->pw_dir);
QFile pam_file(user_home.absoluteFilePath(".pam_environment"));
if (pam_file.open(QIODevice::ReadOnly)) {
while (!pam_file.atEnd()) {
const QByteArray &line = pam_file.readLine().simplified();
if (line.startsWith("QT_SCALE_FACTOR")) {
const QByteArrayList &list = line.split('=');
if (list.count() == 2) {
qputenv("QT_SCALE_FACTOR", list.last());
break;
}
}
}
pam_file.close();
}
