use Illuminate\Http\RedirectResponse;
use Illuminate\Routing\Redirector;
static function ($request, $next) {
* @param TransactionGroup $group
* @return RedirectResponse|Redirector
public function cloneGroup(TransactionGroup $group)
/** @var GroupCloneService $service */
$service  = app(GroupCloneService::class);
$newGroup = $service->cloneGroup($group);
// event!
event(new StoredTransactionGroup($newGroup));
app('preferences')->mark();
$title = $newGroup->title ?? $newGroup->transactionJournals->first()->description;
$link  = route('transactions.show', [$newGroup->id]);
session()->flash('success', trans('firefly.stored_journal', ['description' => $title]));
session()->flash('success_url', $link);
return redirect(route('transactions.show', [$newGroup->id]));