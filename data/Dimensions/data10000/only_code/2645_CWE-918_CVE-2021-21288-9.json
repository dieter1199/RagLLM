File.open(file_path("test.jpg")).tap { |f| OpenURI::Meta.init(f) }
subject { CarrierWave::Downloader::RemoteFile.new(file) }
before do
subject.base_uri = URI.parse 'http://example.com/test'
subject.meta_add_field 'content-type', 'image/jpeg'
it 'sets file extension based on content-type if missing' do
expect(subject.original_filename).to eq "test.jpeg"
describe 'with content-disposition' do
subject.meta_add_field 'content-disposition', content_disposition