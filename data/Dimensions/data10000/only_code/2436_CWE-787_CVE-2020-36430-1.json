buf = malloc(size / 4 * 3 + FFMAX(size % 4 - 1, 0));
assert(dsize == size / 4 * 3 + FFMAX(size % 4 - 1, 0));