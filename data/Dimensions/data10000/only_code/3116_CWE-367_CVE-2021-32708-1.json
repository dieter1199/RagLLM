$path = $this->removeFunkyWhiteSpace($path);
private function removeFunkyWhiteSpace(string $path): string
// Remove unprintable characters and invalid unicode characters.
// We do this check in a loop, since removing invalid unicode characters
// can lead to new characters being created.
while (preg_match('#\p{C}+|^\./#u', $path)) {
$path = (string) preg_replace('#\p{C}+|^\./#u', '', $path);
return $path;
