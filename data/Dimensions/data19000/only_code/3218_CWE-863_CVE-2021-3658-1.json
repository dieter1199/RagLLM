store_adapter_info(adapter);
GSList *l;
for (l = adapter->discovery_list; l; l = g_slist_next(l)) {
struct discovery_client *client = l->data;
if (!client->discovery_filter)
continue;
if (client->discovery_filter->discoverable)
break;
}
set_discovery_discoverable(adapter, l ? true : false);
if (adapter->discovery_discoverable)
set_discovery_discoverable(adapter, false);
