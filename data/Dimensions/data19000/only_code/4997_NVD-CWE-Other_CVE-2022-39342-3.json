allRelations := map[string]struct{}{}
typeToRelations := map[string]map[string]struct{}{}
typeToRelations[objectType] = map[string]struct{}{}
for relation := range td.GetRelations() {
typeToRelations[objectType][relation] = struct{}{}
allRelations[relation] = struct{}{}
err := isUsersetRewriteValid(allRelations, typeToRelations[objectType], objectType, relation, rewrite)
func isUsersetRewriteValid(allRelations map[string]struct{}, relationsOnType map[string]struct{}, objectType, relation string, rewrite *openfgapb.Userset) error {
if _, ok := relationsOnType[tupleset]; !ok {