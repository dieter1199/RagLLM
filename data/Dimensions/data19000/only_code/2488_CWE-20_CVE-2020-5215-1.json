if (TF_PREDICT_FALSE(sizeof(T) < sizeof(double) && std::isinf(*out) &&
std::isfinite(as_double))) {
*out = PyInt_AS_LONG(v);
*out = PyLong_AsDouble(v);
// NOTE(nareshmodi): Is there a way to convert to C double without the
// intermediate Python double? This will help with ConvertOneFloat as well.
Safe_PyObjectPtr as_float = make_safe(PyNumber_Float(v));
double v_double = PyFloat_AS_DOUBLE(as_float.get());
*out = Eigen::half(v_double);
return nullptr;
RETURN_STRING_AS_STATUS(NumpyHalfConverter::Convert(obj, &state, ret));
