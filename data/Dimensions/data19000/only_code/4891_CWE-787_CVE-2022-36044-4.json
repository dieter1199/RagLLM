static void try_free_empty_list(RzList *list) {
if (list != NULL) {
rz_list_free(list);
}
}
try_free_empty_list(ret->entry_list);
try_free_empty_list(ret->symbol_list);
try_free_empty_list(ret->section_list);
try_free_empty_list(ret->string_list);
int i = 0; // iter
char **upvalue_names;
int real_upvalue_cnt;
LuaDbgUpvalueEntry *debug_upv_entry;
real_upvalue_cnt = rz_list_length(proto->upvalue_entries);
upvalue_names = RZ_NEWS0(char *, real_upvalue_cnt);
if (!upvalue_names) {
return;
}
rz_list_foreach (proto->dbg_upvalue_entries, iter, debug_upv_entry) {
upvalue_names[i] = (char *)debug_upv_entry->upvalue_name;
luac_add_string(
info->string_list,
upvalue_names[i],
debug_upv_entry->offset,
debug_upv_entry->name_len);
RZ_FREE(proto_name);
