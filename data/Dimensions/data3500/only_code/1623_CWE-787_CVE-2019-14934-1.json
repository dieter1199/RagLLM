new_fname = malloc(strlen(fname) + strlen(dirname) + 16);
dname = malloc(strlen(name) + 16);