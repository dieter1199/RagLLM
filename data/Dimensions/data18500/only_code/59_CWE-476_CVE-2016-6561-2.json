static void smb_flush_file(struct smb_request *sr, struct smb_ofile *ofile);
smb_flush_file(sr, sr->fid_ofile);
smb_flush_file(sr, file);
/*
* smb_flush_file
*
* If writes on this file are not synchronous, flush it using the NFSv3
* commit interface.
*/
static void
smb_flush_file(struct smb_request *sr, struct smb_ofile *ofile)
{
sr->user_cr = smb_ofile_getcred(ofile);
if ((ofile->f_node->flags & NODE_FLAGS_WRITE_THROUGH) == 0)
(void) smb_fsop_commit(sr, sr->user_cr, ofile->f_node);
}
