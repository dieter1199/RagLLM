servletPath = servletPath.replaceFirst("/initfilter", "/WEB-INF/view"); // strip out the /initfilter part
File file = new File(filterConfig.getServletContext().getRealPath(servletPath));
file = new File(file, httpRequest.getPathInfo());
InputStream imageFileInputStream = null;
try {
imageFileInputStream = new FileInputStream(file);
log.error("Unable to find file: " + file.getAbsolutePath());
finally {
if (imageFileInputStream != null) {
try {
imageFileInputStream.close();
}
catch (IOException io) {
log.warn("Couldn't close imageFileInputStream: " + io);
}
}
log.error("velocity init failed, because: " + e);