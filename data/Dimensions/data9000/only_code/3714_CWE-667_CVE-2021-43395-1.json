if (tp != dir)
rw_enter(&tp->tn_rwlock, RW_WRITER);