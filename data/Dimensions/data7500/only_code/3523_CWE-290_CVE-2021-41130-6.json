const std::string &value) {
ngx_table_elt_t *h = nullptr;
h = &h_in;
break;
if (h == nullptr) {
h = reinterpret_cast<ngx_table_elt_t *>(
if (ngx_str_copy_from_std(r_->pool, key, &h->key) != NGX_OK ||
ngx_str_copy_from_std(r_->pool, value, &h->value) != NGX_OK) {
return utils::Status(Code::INTERNAL, "Out of memory");
ngx_log_debug2(NGX_LOG_DEBUG_HTTP, r_->connection->log, 0,
"updates header to backend: \"%V: %V\"", &h->key, &h->value);