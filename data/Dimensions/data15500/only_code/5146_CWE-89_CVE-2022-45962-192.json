echo "<tr><td  style=\"font-size:15px; font-weight:bold; padding-top:10px;\">" . GetSchool(UserSchool()) . "<div style=\"font-size:12px;\">"._listOfEvents."</div></td><td align=right style=\"padding-top:10px;\">" . ProperDate(DBDate()) . "<br />"._listOfEvents." openSIS</td></tr><tr><td colspan=2 style=\"border-top:1px solid #333;\">&nbsp;</td></tr></table>";
ListOutputFloat($_SESSION['events_RET'], array('SCHOOL_DATE' =>_date, 'TITLE' =>_date, 'DESCRIPTION' =>_description), event, events, '', '', array('search' =>_date, 'count' =>_description));
DrawBC(""._schoolSetup." > " . ProgramTitle());
echo '<div class="alert alert-danger no-border">'._noCalendarsWereFound.'</div>';
$message .= '<label class="col-md-2 control-label text-right">'._title.'</label>';
$message .= '<div class="checkbox checkbox-switch switch-success"><label><INPUT type=checkbox name=default value=Y><span></span>'._defaultCalendarForThisSchool.'</label></div>';
$message .= '<label class="col-md-4 control-label text-right">'._from.'</label>';
$message .= '<label class="col-md-4 control-label text-right">'._to.'</label>';
$message .= '<label class="col-md-4 control-label text-right">'._weekdays.'</label>';
$message .= '<div class="col-md-8"><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[0]>'._sunday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[1] CHECKED>'._monday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[2] CHECKED>'._tuesday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[3] CHECKED>'._wednesday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[4] CHECKED>'._thursday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[5] CHECKED>'._friday.'</label></div> <div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[6]>'._saturday.'</label></div></div>';
if (Prompt_Calender(''._createANewCalendar.'', '', $message)) {
$col = Calender_Title;
$fetch_calendar_id = DBGet(DBQuery('SHOW TABLE STATUS LIKE \'school_calendars\''));
$calendar_id[1]['CALENDAR_ID'] = $fetch_calendar_id[1]['AUTO_INCREMENT'];
$calendar_id = $calendar_id[1]['CALENDAR_ID'];
for ($i = $begin; $i <= $end; $i+=86400) {
if ($dup_cal_title[1]['NO'] == 0)
DBQuery('INSERT INTO school_calendars (SYEAR,SCHOOL_ID,TITLE,DEFAULT_CALENDAR,DAYS) values(\'' . UserSyear() . '\',\'' . UserSchool() . '\',\'' . $cal_title . '\',\'' . $_REQUEST['default'] . '\',\'' . conv_day($_REQUEST['weekdays']) . '\')');
$profile_sql .='(\'' . $calendar_id . '\',\'' . $key . '\',NULL),';
$profile_sql .='(\'' . $calendar_id . '\',NULL,\'' . $key . '\'),';
echo'<div class="alert alert-danger">'._calenderTitleAlreadyExists.'</div>';
$colmn = Calender_Id;
$cal_title = paramlib_validation($colmn, $_REQUEST[calendar_id]);
UnableDeletePrompt( _cannotDeleteBecauseStudentsAreEnrolledInThisCalendar);
UnableDeletePrompt( _cannotDeleteBecauseCoursePeriodsAreCreatedOnThisCalendar);
$error = array(''._thereAreNoCalendarsYetSetup.'.');
$colmn = Calender_Id;
$message .= '<label class="col-md-2 control-label text-right">'._title.'</label>';
$message .= '<INPUT type=text name=title class=form-control id=title value="' . $acs_RET[TITLE] . '">';
$message .= '<div class="checkbox checkbox-switch switch-success switch-sm"><label><INPUT type=checkbox name=default value=Y ' . (($acs_RET['DEFAULT_CALENDAR'] == 'Y') ? 'checked' : '') . '><span></span>'._defaultCalendarForThisSchool.'</label></div>';
$message .= '<label class="col-md-4 control-label text-right">'._from.'</label>';
$message .= '<label class="col-md-4 control-label text-right">'._to.'</label>';
$message .= '<label class="col-md-4 control-label text-right">'._weekdays.'</label>';
$message .= '<div class="col-md-8"><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[0] ' . ((in_array('U', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED> '._sunday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[1] ' . ((in_array('M', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED>'._monday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[2] ' . ((in_array('T', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED>'._tuesday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[3] ' . ((in_array('W', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED>'._wednesday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[4] ' . ((in_array('H', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED>'._thursday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[5] ' . ((in_array('F', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED>'._friday.'</label></div><div class="checkbox"><label><INPUT class="styled" type=checkbox value=Y name=weekdays[6] ' . ((in_array('S', $weekdays) == true) ? 'CHECKED' : '') . ' DISABLED> '._saturday.'</label></div></div>';
$end_date_cal=$_REQUEST['year__max'].'-'.$_REQUEST['month__max'].'-'.$_REQUEST['day__max'];
$start_date_cal=$_REQUEST['year__min'].'-'.$_REQUEST['month__min'].'-'.$_REQUEST['day__min'];
$min_date=DBGet(DBquery('SELECT MIN(SCHOOL_DATE) as SCHOOL_DATE FROM attendance_calendar WHERE CALENDAR_ID='.$cal_id));
$max_date=DBGet(DBquery('SELECT MAX(SCHOOL_DATE) as SCHOOL_DATE FROM attendance_calendar WHERE CALENDAR_ID='.$cal_id));
$cal_days=DBGet(DBquery('SELECT DAYS FROM school_calendars WHERE CALENDAR_ID='.$cal_id));
$days_conv=array('Mon'=>'M','Tue'=>'T','Wed'=>'W','Thu'=>'H','Fri'=>'F','Sat'=>'S','Sun'=>'U');
if(strtotime($start_date_cal)<strtotime($min_date[1]['SCHOOL_DATE']) && $start_date_cal!='' && $min_date[1]['SCHOOL_DATE']!='')
{
$date1_ts = strtotime($start_date_cal);
$date2_ts = strtotime($min_date[1]['SCHOOL_DATE']);
$diff = $date2_ts - $date1_ts;
for($d=0;$d<round($diff / 86400);$d++)
{
$mk_date=strtotime($start_date_cal)+(86400*$d);
if(strpos($cal_days[1]['DAYS'],$days_conv[date('D',$mk_date)])!==false)
{
$ins_date=date('Y-m-d',$mk_date);
DBQuery('INSERT INTO attendance_calendar (SYEAR,SCHOOL_ID,SCHOOL_DATE,MINUTES,CALENDAR_ID) VALUES (\''.UserSyear().'\',\''.UserSchool().'\',\''.$ins_date.'\',999,\''.$cal_id.'\')');
}
if(strtotime($end_date_cal)>strtotime($max_date[1]['SCHOOL_DATE']))
{
$date2_ts = strtotime($end_date_cal);
$date1_ts = strtotime($max_date[1]['SCHOOL_DATE']);
$diff = $date2_ts - $date1_ts;
for($d=1;$d<=round($diff / 86400);$d++)
{
$mk_date=strtotime($max_date[1]['SCHOOL_DATE'])+(86400*$d);
if(strpos($cal_days[1]['DAYS'],$days_conv[date('D',$mk_date)])!==false)
{
$ins_date=date('Y-m-d',$mk_date);
DBQuery('INSERT INTO attendance_calendar (SYEAR,SCHOOL_ID,SCHOOL_DATE,MINUTES,CALENDAR_ID) VALUES (\''.UserSyear().'\',\''.UserSchool().'\',\''.$ins_date.'\',999,\''.$cal_id.'\')');
}
$profile_sql .='(\'' . $cal_id . '\',\'' . $key . '\',NULL),';
$profile_sql .='(\'' . $cal_id . '\',NULL,\'' . $key . '\'),';
echo'<p style=color:red>'._calenderTitleAlreadyExists.'.</p>';
$value = mysql_real_escape_string($value);
$sql.=' CALENDAR_ID=\'0\'';
$sql.=' CALENDAR_ID=\'' . $_REQUEST[calendar_id] . '\'';
$sql.=',CALENDAR_ID=\'0\'';
$sql.=' ,CALENDAR_ID=\'' . $_REQUEST[calendar_id] . '\'';
$sql.= ' WHERE ID=\'' . $_REQUEST[event_id] . '\'';
}
else {
$value = mysql_real_escape_string($value);
DBQuery("DELETE FROM calendar_events WHERE ID='" . paramlib_validation($column = EVENT_ID, $_REQUEST[event_id]) . "'");
// echo '<SCRIPT language=javascript>opener.document.location = "Modules.php?modname=' . $_REQUEST['modname'] . '&calendar_id=' . $_REQUEST['calendar_id'] . '&year=' . $_REQUEST['year'] . '&month=' . MonthNWSwitch($_REQUEST['month'], 'tochar') . '"; window.close();</script>';
//
//            echo '<SCRIPT language=javascript>window.location.href = "Modules.php?modname=' . $_REQUEST['modname'] . '"; window.close();</script>';
//            unset($_REQUEST['values']);
//            unset($_SESSION['_REQUEST_vars']['values']);
//            unset($_REQUEST['button']);
//            unset($_SESSION['_REQUEST_vars']['button']);
//            echo '<SCRIPT language=javascript>window.close();</script>';
$RET = DBGet(DBQuery('SELECT TITLE,STAFF_ID,DATE_FORMAT(DUE_DATE,\'%d-%b-%y\') AS SCHOOL_DATE,ASSIGNED_DATE,DUE_DATE,DESCRIPTION FROM gradebook_assignments WHERE ASSIGNMENT_ID=\'' . $_REQUEST[assignment_id] . '\''));
echo '<div class="form-group"><label class="control-label text-right col-md-4">'._date.'</label><div class="col-md-8">' . date("Y/M/d", strtotime($RET[1]['SCHOOL_DATE'])) . '</div></div>';
echo '<div class="form-group"><label class="control-label text-right col-md-4">'._teacher.'</label><div class="col-md-8">' . (User('PROFILE') == 'admin' ? TextAreaInput($RET[1]['STAFF_ID'], 'values[STAFF_ID]') : $RET[1]['STAFF_ID']) . '</div></div>';
echo '<div class="form-group"><label class="control-label text-right col-md-4">'._assignedDate.'</label><div class="col-md-8">' . (User('PROFILE') == 'admin' ? TextAreaInput($RET[1]['ASSIGNED_DATE'], 'values[ASSIGNED_DATE]') : $RET[1]['ASSIGNED_DATE']) . '</div></div>';
echo '<div class="form-group"><label class="control-label text-right col-md-4">'._dueDate.'</label><div class="col-md-8">' . (User('PROFILE') == 'admin' ? TextAreaInput($RET[1]['DUE_DATE'], 'values[DUE_DATE]') : $RET[1]['DUE_DATE']) . '</div></div>';
echo '<INPUT type=submit class="btn btn-primary" name=button value='._save.' onclick="return formcheck_calendar_event();">';
echo '<INPUT type=submit name=button class="btn btn-white" value='._delete.' onclick="formload_ajax(\'popform\');">';
}
else {
echo '<div class="form-group"><label class="control-label text-right col-md-4">'._showEventsSystemWide.'</label><div class="col-md-8">' . ($RET[1]['CALENDAR_ID'] == '' ? '<i class="icon-checkbox-checked"></i>' : '<i class="icon-checkbox-unchecked"></i>') . '</div></div>';
$_REQUEST['day_start'] --;
$_REQUEST['day_end'] --;
DrawBC(""._schoolSetup." > " . ProgramTitle());
echo '<div class="alert alert-danger alert-styled-left alert-bordered"><span class="text-bold">'._alert.'!!</span> - '._alert.'.</span></div>';
echo '<h6 class="panel-title"><A HREF=Modules.php?modname=' . $_REQUEST['modname'] . '&month=' . $_REQUEST['month'] . '&year=' . $_REQUEST['year'] . ' class="text-primary"><i class="icon-square-left"></i>'._backToCalendar.'</A></h6>';
echo '<div class="form-inline inline-block"><div class="inline-block">' . PrepareDateSchedule($start_date, 'start') . '</div><label>&nbsp; &nbsp; - &nbsp; &nbsp;</label><div class="inline-block">' . PrepareDateSchedule($end_date, 'end') . '</div> &nbsp; &nbsp;<INPUT type=submit class="btn btn-primary" value='._go.'></div>';
ListOutput($events_RET, array('SCHOOL_DATE' => ''._date.'', 'TITLE' => ''._event.'', 'DESCRIPTION' => ''._description.''), event, events);
DrawBC(""._schoolSetup." > " . ProgramTitle());
DrawBC(""._schoolInfo." > " . ProgramTitle());
$period.=$value['PERIOD_ID'] . ',';
echo '<font color=red><b>'._selectedDayHasAssociation.'</b></font>';
}
else {
echo '<font color=red><b>'._selectedDayHasAssociation.'</b></font>';
$link .= '<div class="col-md-6"><h3 class="text-center m-0"><a href="Modules.php?modname=' . $_REQUEST['modname'] . '&modfunc=' . $_REQUEST['modfunc'] . '&month=' . date('m',strtotime('first day of -1 month', $time)) . '&year=' . date('Y',strtotime('first day of -1 month', $time)) . '" class="btn btn-icon"><i class="fa fa-chevron-left fa-lg"></i></a> <span class="inline-block p-l-20 p-r-20">' . date("F Y", $time) . '</span> <a href="Modules.php?modname=' . $_REQUEST['modname'] . '&modfunc=' . $_REQUEST['modfunc'] . '&month=' . date('m',strtotime('first day of +1 month', $time)) . '&year=' . date('Y',strtotime('first day of +1 month', $time)) . '" class="btn btn-icon"><i class="fa fa-chevron-right fa-lg"></i></a></h3></div>';
$link .= "<div class=\"btn-group pull-right\"><a href='#' onclick='load_link(\"Modules.php?modname=$_REQUEST[modname]&modfunc=create\");' class=\"btn btn-primary btn-icon btn-lg\" data-popup=\"tooltip\" data-placement=\"top\" data-original-title=\""._createANewCalendar."\"><i class=\"fa fa-plus\"></i></a>";
$link .= "<a href='#' onclick='load_link(\"Modules.php?modname=$_REQUEST[modname]&modfunc=delete_calendar&calendar_id=$_REQUEST[calendar_id]\");' class=\"btn btn-primary btn-lg btn-icon\" data-popup=\"tooltip\" data-placement=\"top\" data-original-title=\""._deleteThisCalendar."\"><i class=\"fa fa-times\"></i></a><a href='#' onclick='load_link(\"Modules.php?modname=$_REQUEST[modname]&modfunc=edit_calendar&calendar_id=$_REQUEST[calendar_id]\");' class=\"btn btn-primary btn-lg btn-icon\" data-popup=\"tooltip\" data-placement=\"top\" data-original-title=\""._editThisCalendar."\"><i class=\"fa fa-pencil\"></i></a></div>";
$link .='</tr></table>';
DrawHeaderHome('<div class="inline-block">' . PrepareDate(strtoupper(date("d-M-y", $time)), '', false, array('M' => date("m", $time), 'Y' => date("y", $time), 'submit' =>true, 'view' => 'month')) . '</div>' . ' <A HREF=Modules.php?modname=' . $_REQUEST['modname'] . '&modfunc=list_events&calendar_id=' . $_REQUEST['calendar_id'] . '&month=' . $_REQUEST['month'] . '&year=' . $_REQUEST['year'] . ' class="btn btn-default m-l-5">'._listEvents.'</A>', (User('PROFILE') == 'admin' ? SubmitButton(_save, '', 'class="btn btn-primary pull-right"  onclick="self_disable(this);"') : ''));
if (count($error)) {
//echo 'SELECT ce.ID,DATE_FORMAT(ce.SCHOOL_DATE,\'%d-%b-%y\') AS SCHOOL_DATE,ce.TITLE FROM calendar_events ce,calendar_events_visibility cev WHERE ce.SCHOOL_DATE BETWEEN \'' . date('Y-m-d', $time) . '\' AND \'' . date('Y-m-d', mktime(0, 0, 0, $_REQUEST['month'], $last, $_REQUEST['year'])) . '\' AND SYEAR=\'' . UserSyear() . '\' AND ce.calendar_id=\'' . $_REQUEST['calendar_id'] . '\'  AND ce.CALENDAR_ID=cev.CALENDAR_ID AND cev.PROFILE_ID=' . User('PROFILE_ID') . ' UNION SELECT ID,DATE_FORMAT(SCHOOL_DATE,\'%d-%b-%y\') AS SCHOOL_DATE,TITLE FROM calendar_events WHERE SCHOOL_DATE BETWEEN \'' . date('Y-m-d', $time) . '\' AND \'' . date('Y-m-d', mktime(0, 0, 0, $_REQUEST['month'], $last, $_REQUEST['year'])) . '\' AND SYEAR=\'' . UserSyear() . '\' AND CALENDAR_ID=0';
echo "<th>"._sunday."</th><th>"._monday."</th><th>"._tuesday."</th><th>"._wednesday."</th><th>"._thursday."</th><th>"._friday."</th><th width=99>"._saturday."</th>";
echo '<TR><TD><div id=syswide_holi_' . $i . ' style="display:none; padding-top: 10px;"><label class="checkbox-inline"><INPUT type=checkbox name=show_all[' . $date . '] value=Y> '._systemWide.'</label></div></TD></TR>';
echo "<div id=syswide_holi_$i style='display:none; padding-top: 10px;'><label class='checkbox-inline'><INPUT type=checkbox name=show_all[$date] value=Y>"._systemWide."</label></div>";
if (count($events_RET[$date])) {
//echo "<TR><TD>" . button('dot', '0000FF', '', '6') . "</TD><TD> <A class=\"event\" HREF=# onclick='javascript:window.open(\"ForWindow.php?modname=$_REQUEST[modname]&modfunc=detail&event_id=$event[ID]&year=$_REQUEST[year]&month=" . MonthNWSwitch($_REQUEST['month'], 'tochar') . "\",\"blank\",\"width=600,height=400\"); return false;'><b>" . ($event['TITLE'] ? $e_title : '***') . "1</b></A></TD></TR>";
//  echo '<tr><td valign=bottom align=left><i class=fa fa-plus><input type=button data-toggle="modal"  data-event-id=new onclick="CalendarModal(\'new\','.$_REQUEST[calendar_id].',\''.$date.'\',\''.$_REQUEST[year].'\',\''.MonthNWSwitch($_REQUEST[month]).'\',\'tochar\');"></i></td></tr>';
echo '<TR><TD>' . button("dot", "0000FF", "", "6") . '</TD><TD> <A class=\"event\" HREF=# onclick="CalendarModal(\'' . $event[ID] . '\',' . $_REQUEST[calendar_id] . ',\'' . $date . '\',\'' . $_REQUEST[year] . '\',\'' . MonthNWSwitch($_REQUEST[month]) . '\',\'tochar\')"; return false;>' . ($event['TITLE'] ? $e_title : '***') . '</b></A></TD></TR>';
if (count($assignments_RET[$date])) {
// echo "<TR><TD>" . button('dot', $event['ASSIGNED'] == 'Y' ? '00FF00' : 'FF0000', '', 6) . "</TD><TD><A class=\"event\" HREF=# onclick='javascript:window.open(\"ForWindow.php?modname=$_REQUEST[modname]&modfunc=detail&assignment_id=$event[ID]&year=$_REQUEST[year]&month=" . MonthNWSwitch($_REQUEST['month'], 'tochar') . "\",\"blank\",\"width=600,height=400\"); return false;'>" . $event['TITLE'] . "</A></TD></TR>";
} elseif (count($assignments_RET[$date])) {
//echo "<TR><TD>" . button('dot', $event['ASSIGNED'] == 'Y' ? '00FF00' : 'FF0000', '', 6) . "</TD><TD><A HREF=#  onclick='javascript:window.open(\"ForWindow.php?modname=$_REQUEST[modname]&modfunc=detail&assignment_id=$event[ID]&year=$_REQUEST[year]&month=" . MonthNWSwitch($_REQUEST['month'], 'tochar') . "\",\"blank\",\"width=600,height=400\"); return false;'>" . $event['TITLE'] . "3</A></TD></TR>";
// echo "<tr><td valign=bottom align=left>" . button('add', '', "# onclick='javascript:window.open(\"ForWindow.php?modname=$_REQUEST[modname]&modfunc=detail&event_id=new&calendar_id=$_REQUEST[calendar_id]&school_date=$date&year=$_REQUEST[year]&month=" . MonthNWSwitch($_REQUEST['month'], 'tochar') . "\",\"blank\",\"width=600,height=400\"); return false;'") . "</td></tr>";
// echo '<tr><td valign=bottom align=left><i class=fa fa-plus><input type=button data-toggle="modal" data-event_id=new data-target="#modal_default_lookup" name=lookup  onclick=(\'modal_default_lookup\'));></i></td></tr>';
//echo '<tr><td valign=bottom align=left><i class=icon-plus3><input type=button data-toggle="modal"  data-event-id=new onclick="CalendarModal(\'new\','.$_REQUEST[calendar_id].',\''.$date.'\',\''.$_REQUEST[year].'\',\''.MonthNWSwitch($_REQUEST[month]).'\',\'tochar\');"></i></td></tr>';
echo '<tr><td valign=bottom align=left><button type="button" class="btn btn-primary btn-icon btn-xs" data-toggle="modal"  data-event-id=new onclick="CalendarModal(\'new\',' . $_REQUEST[calendar_id] . ',\'' . $date . '\',\'' . $_REQUEST[year] . '\',\'' . MonthNWSwitch($_REQUEST[month]) . '\',\'tochar\');"><i class=icon-plus3 ></i></button></td></tr>';
echo '<h5 class="modal-title">'._eventDetails.'</h5>';
echo'<div id="modal-res"></div>';
function calendarEventsVisibility() {
$return .= '<div class="form-group"><label class="col-md-4 control-label text-right">'._eventsVisibleTo.'</label>';
foreach (array('admin' => ''._administratorWCustom.'', 'teacher' => ''._administratorWCustom.'', 'parent' => ''._administratorWCustom.'') as $profile_id => $profile)
$return .= "<div class=\"checkbox\"><label><INPUT class=\"styled\" type=checkbox name=profiles[$profile_id] value=Y" . (in_array($profile_id, $visible_profile) ? ' CHECKED' : '') . "> $profile</label></div>";
if($profile[TITLE] == "Super Administrator")
{
$profile[TITLE] = _superAdministrator;
}elseif($profile[TITLE] == "Administrator")
{
$profile[TITLE] = _administrator;
}elseif($profile[TITLE] == "Teacher")
{
$profile[TITLE] = _teacher;
}elseif($profile[TITLE] == "Student")
{
$profile[TITLE] = _student;
}elseif($profile[TITLE] == "Parent"){
$profile[TITLE] = _parent;
}elseif($profile[TITLE] == "Admin Asst")
{
$profile[TITLE] = _adminAsst;
}
$return .= '<div class="checkbox"><label><INPUT class="styled" type=checkbox name=profiles[' . $profile['ID'] . '] value=Y' . (in_array($profile[ID], $visible_profile) ? ' CHECKED' : '') . "> $profile[TITLE]</label></div>";
//for (; $i % 4 != 0; $i++)
//$return .= '<TD></TD>';
function _makeCheckBoxInput($value, $eve_stat) {
function conv_day($days_arr) {
$cal_days .='U';
$cal_days .='M';
$cal_days .='T';
$cal_days .='W';
$cal_days .='H';
$cal_days .='F';
$cal_days .='S';
?>
