* @param $auto                  boolean: check done autically ? (if not display result)
*                                        (true by default)
* @param $messageafterredirect  boolean: use message after redirect instead of display
*                                        (false by default)
*
* @return string explaining the result
static function checkNewVersionAvailable($auto = true, $messageafterredirect = false) {
if (!$auto
&& !Session::haveRight('backup', Backup::CHECKUPDATE)) {
return false;
}
if (!$auto && !$messageafterredirect) {
echo "<br>";
}
if (!$auto) {
if ($messageafterredirect) {
Session::addMessageAfterRedirect($error, true, ERROR);
} else {
echo "<div class='center'>$error</div>";
}
} else {
return $error;
}
if (!$auto) {
if ($messageafterredirect) {
Session::addMessageAfterRedirect(sprintf(__('A new version is available: %s.'),
$latest_version));
Session::addMessageAfterRedirect(__('You will find it on the GLPI-PROJECT.org site.'));
} else {
echo "<div class='center'>".sprintf(__('A new version is available: %s.'),
$latest_version)."</div>";
echo "<div class='center'>".__('You will find it on the GLPI-PROJECT.org site.').
"</div>";
}
} else {
if ($messageafterredirect) {
Session::addMessageAfterRedirect(sprintf(__('A new version is available: %s.'),
$latest_version));
} else {
return sprintf(__('A new version is available: %s.'), $latest_version);
}
}
if (!$auto) {
if ($messageafterredirect) {
Session::addMessageAfterRedirect(__('You have the latest available version'));
} else {
echo "<div class='center'>".__('You have the latest available version')."</div>";
}
} else {
if ($messageafterredirect) {
Session::addMessageAfterRedirect(__('You have the latest available version'));
} else {
return __('You have the latest available version');
}
}
