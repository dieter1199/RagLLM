$ip = getenv('HTTP_CLIENT_IP');
$ip = getenv('HTTP_X_FORWARDED_FOR');
$ip = getenv('HTTP_X_FORWARDED');
$ip = getenv('HTTP_FORWARDED_FOR');
$ip = getenv('HTTP_FORWARDED');
$ip = $_SERVER['REMOTE_ADDR'];
$insert = $db->sql_query("INSERT INTO `mod_useronline` (`timestamp`, `ip`) VALUES ('mysql_real_escape_string($this->timestamp)', 'mysql_real_escape_string($this->ip)')");
$ip				 =	getIP();
$item	=	mysql_fetch_assoc(mysql_query ("SELECT COUNT(*) AS `total` FROM `mod_visitcounter` WHERE `ip`='mysql_real_escape_string($ip)' AND (tm+'$locktime')>'$now'"));
mysql_query ("INSERT INTO `mod_visitcounter` (`id`, `tm`, `ip`) VALUES ('', '$now', 'mysql_real_escape_string($ip)')");