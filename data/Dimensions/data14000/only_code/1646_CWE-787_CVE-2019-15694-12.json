inline int check(int itemSize, int nItems=1, bool wait=true)
inline bool checkNoWait(int length) { return check(length, 1, false)!=0; }
inline void skip(int bytes) {
int n = check(1, bytes);
void readBytes(void* data, int length) {
int n = check(1, dataEnd - dataPtr);
virtual int pos() = 0;
virtual int overrun(int itemSize, int nItems, bool wait=true) = 0;