import { getAssociatedTokenAddress } from '@solana/spl-token';
import { Amount, Memo, Recipient, References, SPLToken } from './types';
const [preAmount, postAmount] = splToken
? await validateSPLTokenTransfer(message, meta, recipient, splToken)
: await validateSystemTransfer(message, meta, recipient);
if (reference) {
if (!Array.isArray(reference)) {
reference = [reference];
}
for (const pubkey of reference) {
if (!message.accountKeys.some((accountKey) => accountKey.equals(pubkey)))
throw new ValidateTransferError('reference not found');
}
// FIXME: add memo check
recipient: Recipient
splToken: SPLToken
