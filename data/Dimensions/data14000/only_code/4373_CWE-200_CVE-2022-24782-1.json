.select(:category_id, :notification_level, :last_seen_at)
yield [
cu.category_id,
piped_category_name(cu.category_id),
NotificationLevels.all[cu.notification_level],
cu.last_seen_at
]
end
def piped_category_name(category_id)
return "-" unless category_id
category = Category.find_by(id: category_id)
return "#{category_id}" unless category
topic_data = Topic.with_deleted.find_by(id: user_archive['topic_id']) if topic_data.nil?
categories = piped_category_name(topic_data.category_id)