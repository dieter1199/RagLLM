$regex .= _compile_format($constraints->{format}, $defaults->{format}) if $detect;
my ($format, $default) = @_;
# Default regex
return '/?(?:\.([^/]+))?$' unless defined $format;
return $default ? "/?(?:$regex)?\$" : "/?$regex\$";
my $pattern = Mojolicious::Routes::Pattern->new(format => 0);
$pattern = $pattern->parse(format => 0);
