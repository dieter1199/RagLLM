from twisted.web.resource import Resource
from scrapy_splash.utils import to_bytes
from tests.mockserver import MockServer
class HtmlResource(Resource):
isLeaf = True
content_type = 'text/html'
html = ''
extra_headers = {}
status_code = 200
def render_GET(self, request):
request.setHeader(b'content-type', to_bytes(self.content_type))
for name, value in self.extra_headers.items():
request.setHeader(to_bytes(name), to_bytes(value))
request.setResponseCode(self.status_code)
return to_bytes(self.html)
def crawl_items(spider_cls, resource_cls, settings, spider_kwargs=None):
root_url = s.root_url
result = crawler.spider.collected_items, s.root_url, crawler
