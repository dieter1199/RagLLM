def decompress(dest_path, compressed_file_path, max_size, allow_non_root_folder: false)
entry_path = build_entry_path(
compressed_file, sanitize_path(dest_path),
sanitized_compressed_file_path, entry,
allow_non_root_folder
)
def strip_directory(from, to, relative: false)
sanitized_from = sanitize_path(from) rescue nil
sanitized_to = sanitize_path(to) rescue nil
return unless sanitized_from && sanitized_to
glob_path = relative ? "#{sanitized_from}/*/*" : "#{sanitized_from}/**"
FileUtils.mv(Dir.glob(glob_path), sanitized_to) if File.directory?(sanitized_from)
end
