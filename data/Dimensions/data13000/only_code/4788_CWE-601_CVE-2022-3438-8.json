def test_change_fullname(self):
self._set_profile_info("test@test.com", "My Fullname")
self.assertInBody("Profile updated successfully.")
# Then database is updated with fullname
self.assertInBody("My Fullname")
user = UserObject.query.filter(UserObject.username == self.USERNAME).first()
self.assertEqual("My Fullname", user.fullname)
def test_change_email_with_invalid_email(self):
self._set_profile_info("@test.com")
self.assertStatus(200)
self.assertInBody("Invalid email")
self._set_profile_info("test.com")
self.assertStatus(200)
self.assertInBody("Invalid email")
self._set_profile_info("test")
self.assertStatus(200)
self.assertInBody("Invalid email")
self._set_profile_info("test@te_st.com")
self.assertStatus(200)
self.assertInBody("Invalid email")
self._set_profile_info("test@test.com, test2@test.com")
self.assertInBody("Invalid email")
self.assertInBody("Invalid email")
