#define CASE(TYPE, STMTS)             \
case DataTypeToEnum<TYPE>::value: { \
typedef TYPE T;                   \
STMTS;                            \
break;                            \
CASES_WITH_DEFAULT(TYPE_ENUM, STMTS,                               \
LOG(FATAL) << "Unexpected type: " << TYPE_ENUM; \
, LOG(FATAL) << "Type not set";)