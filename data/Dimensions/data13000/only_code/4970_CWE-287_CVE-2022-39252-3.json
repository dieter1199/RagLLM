# This function is copyrighted under the Apache 2.0 license Zil0
def _handle_forwarded_room_key_event(
sender,  # type: str
sender_key,  # type: str
payload,  # type: Dict[Any, Any]
):
# type: (...) -> Union[ForwardedRoomKeyEvent, BadEventType, None]
event = ForwardedRoomKeyEvent.from_dict(payload, sender, sender_key)
if isinstance(event, (BadEvent, UnknownBadEvent)):
return event
return None
if event.session_id not in self.outgoing_key_requests:
return None
key_request = self.outgoing_key_requests.pop(key_request.request_id)
