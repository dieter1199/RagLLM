max = (1 << (nbits - 1)) - 1
min = -(max + 1)
max = (1 << nbits) - 1
min = 0
"val = (val < #{min}) ? #{min} : (val > #{max}) ? #{max} : val"