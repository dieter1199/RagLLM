if (resume && c->status == MRB_FIBER_TRANSFERRED) {
if (c->status == MRB_FIBER_RUNNING || c->status == MRB_FIBER_RESUMED) {
if (c->status == MRB_FIBER_TERMINATED) {
mrb->c->status = resume ? MRB_FIBER_RESUMED : MRB_FIBER_TRANSFERRED;
if (c->status == MRB_FIBER_CREATED) {
if (len >= c->stend - c->stack) {
mrb_raise(mrb, E_FIBER_ERROR, "too many arguments to fiber");
}
fiber_switch_context(mrb, c);