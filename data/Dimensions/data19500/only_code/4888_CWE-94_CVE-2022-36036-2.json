instances.forEach(([node, index, parent]) => {
type: 'jsx',
value: `<Mermaid chart={\`${node.value}\`}/>`,
position: node.position
// Look for any components
visit<Literal<string> & { type: 'jsx' }>(ast, { type: 'jsx' }, (node, index, parent) => {
if (/.*<Mermaid.*/.test(node.value)) {
// If the component doesn't have config
if (!/.*config={.*/.test(node.value)) {
const index = node.value.indexOf('<Mermaid') + 8
node.value = node.value.substring(0, index) +
` config={${JSON.stringify(config || {})}}` +
node.value.substring(index)
}
insertImport(ast)
return visit.EXIT
}
})