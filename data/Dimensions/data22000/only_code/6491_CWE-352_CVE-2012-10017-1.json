* @version 1
Version: 2.04
function prtfl_custom_permalinks() {
global $wp_rewrite;
$wp_rewrite->add_rule( 'portfolio/page/([^/]+)/?$', 'index.php?pagename=portfolio&paged=$matches[1]', 'top' );
$wp_rewrite->add_rule( 'portfolio/page/([^/]+)?$', 'index.php?pagename=portfolio&paged=$matches[1]', 'top' );
$wp_rewrite->flush_rules();
static $sp_nonce_flag = false;
// Run once
if( ! $sp_nonce_flag ) {
prtfl_echo_nonce();
$sp_nonce_flag = true;
}
// Use nonce for verification ...
if( ! function_exists ( 'prtfl_echo_prtfl_nonce' ) ) {
function prtfl_echo_nonce () {
echo sprintf(
'<input type="hidden" name="%1$s" id="%1$s" value="%2$s" />',
'prtfl_nonce_name',
wp_create_nonce( plugin_basename(__FILE__) )
);
}
}
if( isset( $_REQUEST['prtfl_form_submit'] ) ) {
add_action( 'init', 'prtfl_custom_permalinks' ); // add custom permalink for portfolio
