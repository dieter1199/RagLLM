def __init__(self, user_root, path, encoding):
if isinstance(user_root, str):
user_root = os.fsencode(user_root)
if isinstance(path, str):
path = os.fsencode(path)
assert isinstance(user_root, bytes)
assert isinstance(path, bytes)
assert encoding
assert self._encoding
self.path = path.strip(b"/")
if self.path:
self.full_path = os.path.normpath(os.path.join(user_root, self.path))
else:
self.full_path = os.path.normpath(user_root)
# For repository we use either path if defined or the directory base name
if not self.path:
return self._decode(unquote(os.path.basename(self.full_path)))
return self._decode(unquote(self.path))