print "	    <script type=\"dojo/method\" event=onClick>\n";
print "	    <script type=\"dojo/method\" event=onClick>\n";
print "	    <script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/connect\" event=onCancel>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/connect\" event=onCancel>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/connect\" event=onCancel>\n";
$privs = array("computerAdmin","mgmtNodeAdmin",  "imageAdmin", "scheduleAdmin");
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/connect\" event=onKeyPress args=\"e\">\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/connect\" event=onKeyPress args=\"e\">\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	  <script type=\"dojo/method\" event=onClick>\n";
print "	<script type=\"dojo/connect\" event=_setup>\n";
print "	Manage User Group Permissions\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "		selectUserGroup('$cont');\n";
print "	</script>\n";
print "	Copy Permissions\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "		copyUserGroupPrivs('$cont');\n";
print "	</script>\n";
print "	Save Selected Permissions\n";
print "	<script type=\"dojo/method\" event=onClick>\n";
print "		saveUserGroupPrivs('$cont');\n";
print "	</script>\n";
$text .= "	    <script type=\"dojo/method\" event=onClick>";
$text .= "	    <script type=\"dojo/method\" event=onClick>";
$text .= "	    <script type=\"dojo/method\" event=onClick>";
$text .= "	<script type=\"dojo/method\" event=onClick>";
$text .= "	<script type=\"dojo/method\" event=onClick>";
$nodeInfo = getNodeInfo($parent);
if(! preg_match('/^[-A-Za-z0-9_. ]+$/', $newnode)) {
$text = "You can only use letters, numbers, spaces,<br>"
. "dashes(-), dots(.), and underscores(_).";
print "dojo.byId('addChildNodeStatus').innerHTML = '$text';";
if(count($privs))
updateUserOrGroupPrivs($user["id"], $nodeid, $privs, array(), "user");
# check if node matching new name already exists at parent
.       "name = '$newname'";
$msg = "A sibling node of that name currently exists";
. "SET name = '$newname' "
print "<font color=red>$userid not found in any known systems</font><br>\n";
($usergroup == 2 &&
($usergroup == 2 &&
/// getNodeCascadePrivileges
$query = "SELECT g.name AS name, "
while($row = mysql_fetch_assoc($qh))
//print "alert('node: $node; newuser: $newuser; newpriv: $newpriv; newprivval: $newprivval');";
// if $newprivval is true and $newuser already has $newpriv
//   cascaded to it, do nothing
$newusergrp = getUserGroupName($newusergrpid);
//print "alert('node: $node; newuser:grp $newuser;grp newpriv: $newpriv; newprivval: $newprivval');";
// if $newprivval is true and $newusergrp already has $newpriv
//   cascaded to it, do nothing
//print "alert('node: $node; resourcegrp: $resourcegrp; newpriv: $newpriv; newprivval: $newprivval');";
// if $newprivval is true and $resourcegrp already has $newpriv
//   cascaded to it, do nothing
$tmpArr = explode('/', $resourcegrp);
updateResourcePrivs($tmpArr[2], $node, $adds, $removes);
# FIXME validate newgroupid
$resourcesgroups = getUserResources($privs, array("manageGroup"), 1);
if(! array_key_exists($newgroupid, $resourcesgroups['image']) &&
! array_key_exists($newgroupid, $resourcesgroups['computer']) &&
! array_key_exists($newgroupid, $resourcesgroups['managementnode']) &&
! array_key_exists($newgroupid, $resourcesgroups['schedule']) &&
! array_key_exists($newgroupid, $resourcesgroups['serverprofile'])) {
(! in_array("block", $privs["usergroups"][$groupname]['privs']) &&