if ($isPersonal !== 1
&& isset($SETTINGS['subfolder_rights_as_parent'])
&& $SETTINGS['subfolder_rights_as_parent'] === 1
|| ($isPersonal !== 1 && $parentId === "0")
) {
array_push($_SESSION['groupes_visibles'], $newId),
$_SESSION['fonction_id']
if (!empty($role)) {
'type' => "W"
//If it is a subfolder, then give access to it for all roles that allows the parent folder
$rows = DB::query("SELECT role_id, type FROM ".prefix_table("roles_values")." WHERE folder_id = %i", $parentId);
foreach ($rows as $record) {
//add access to this subfolder
DB::insert(
prefix_table("roles_values"),
array(
'role_id' => $record['role_id'],
'folder_id' => $newId,
'type' => $record['type']
)
);