$row = $db->fetchRow("SELECT id FROM ".$pre."nested_tree WHERE title = ".$_SESSION['user_id']);
$rows = $db->fetchAllArray(
"SELECT id FROM ".$pre."nested_tree WHERE personal_folder=1 AND NOT parent_id = ".$row[0].
" AND NOT title = ".$_SESSION['user_id']
);
foreach ($rows as $reccord) {
if (!in_array($reccord['id'], $arrayPf)) {
//build an array of personal folders ids
array_push($arrayPf, $reccord['id']);
//build also a string with those ids
if (empty($listPf)) {
$listPf = $reccord['id'];
} else {
$listPf .= ', '.$reccord['id'];
}
}
$sLimit = "LIMIT ". intval($_GET['iDisplayStart']) .", ". intval($_GET['iDisplayLength']);
$sOrder .= $aColumns[ intval($_GET['iSortCol_'.$i]) ]."
".$_GET['sSortDir_'.$i] .", ";
"SELECT role_id FROM ".$pre."restriction_to_roles WHERE item_id = ".$reccord['id']
