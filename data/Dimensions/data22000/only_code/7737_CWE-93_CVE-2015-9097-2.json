# 2.2.3. Long Header Fields
#
#  The process of moving from this folded multiple-line representation
#  of a header field to its single line representation is called
#  "unfolding". Unfolding is accomplished by simply removing any CRLF
#  that is immediately followed by WSP.  Each header field should be
#  treated in its unfolded form for further syntactic and semantic
#  evaluation.
def unfold(string)
string.gsub(/#{CRLF}#{WSP}+/, ' ').gsub(/#{WSP}+/, ' ')
end
# Returns the header with all the folds removed
def unfolded_header
@unfolded_header ||= unfold(raw_source)
end
self.fields = unfolded_header.split(CRLF)
