$filePath = ('/proc/stat');
if ( !@is_readable($filePath)) {
return 0;
}
$stat1  = file($filePath);
$stat2  = file($filePath);
$info1  = explode(' ', preg_replace('!cpu +!', '', $stat1[0]));
$info2  = explode(' ', preg_replace('!cpu +!', '', $stat2[0]));
$total1 = array_sum($info1);
$total2 = array_sum($info2);
$time1  = $total1 - $info1[3];
$time2  = $total2 - $info2[3];
return round(($time2 - $time1) / ($total2 - $total1), 3);
if ( !@is_readable($memInfoFile)) {
$memInfo = file_get_contents($memInfoFile);