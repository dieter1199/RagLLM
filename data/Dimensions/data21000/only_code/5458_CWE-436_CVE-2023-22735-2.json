def serve_s3(request: HttpRequest, path_id: str, download: bool = False) -> HttpResponse:
url = get_signed_upload_url(path_id)
patch_disposition_header(response, path_id, download)
def serve_local(request: HttpRequest, path_id: str, download: bool = False) -> HttpResponseBase:
return serve_file(request, user_profile, realm_id_str, filename, url_only=False, download=True)
download: bool = False,
mimetype, encoding = guess_type(path_id)
download = download or mimetype not in INLINE_MIME_TYPES
return serve_local(request, path_id, download=download)
return serve_s3(request, path_id, download=download)
mimetype, encoding = guess_type(path_id)
download = mimetype not in INLINE_MIME_TYPES
return serve_local(request, path_id, download=download)
return serve_s3(request, path_id, download=download)
