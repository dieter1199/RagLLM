if (user_alloc && (mem->userspace_addr & (PAGE_SIZE - 1)))
r = copy_from_user(data, (void __user *)addr + offset, len);